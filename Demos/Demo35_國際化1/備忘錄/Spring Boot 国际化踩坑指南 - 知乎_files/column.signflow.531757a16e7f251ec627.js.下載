(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{1452:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(43),a={400:"请求参数有误",401:"用户认证失败",403:"服务已拒绝",404:"资源不存在",405:"请求方式有误",410:"资源已解散",502:"网关错误",503:"服务无响应",504:"网关超时"},o=function(e){var t;return(null==e||null===(t=e.payload)||void 0===t?void 0:t.message)||(null==e?void 0:e.status)&&a[e.status]||"操作失败"};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.a)("ui/showToast").dispatch({icon:"fail",text:o(e)})}},1453:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(0),a=n(1),o=n(55),c=n.n(o),i=function(e){return console.error("该组件没有设置 LoginV2ContextProvider，使用的是默认 Context value。"),e},s={get captchaNeeded(){return i(!1)},get captchaV2(){return i(void 0)},get captchaV2Ref(){return i({current:null})},get continueActionRef(){return i({current:null})},get handleChange(){return i(c.a)},get handleChangeType(){return i(c.a)},get handleSendDigits(){return i(c.a)},get selectClassName(){return i("")},get setState(){return i(c.a)},get testPhoneNo(){return i(c.a)}},u=Object(a.createContext)(s),l=function(){return Object(a.useContext)(u)},d=function(e){var t=e.handleChangeType,n=e.setState,o=e.handleChange,c=e.testPhoneNo,i=e.handleSendDigits,s=e.continueActionRef,l=e.captchaV2Ref,d=e.captchaNeeded,p=e.selectClassName,f=e.captchaV2,h=e.children,g=Object(a.useMemo)((function(){return{handleChangeType:t,handleChange:o,testPhoneNo:c,handleSendDigits:i,selectClassName:p,setState:n,continueActionRef:s,captchaV2Ref:l,captchaNeeded:d,captchaV2:f}}),[t,o,c,i,p,n,s,l,d,f]);return Object(r.b)(u.Provider,{value:g,children:h})}},1472:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(25),a=n(4),o=n(14),c=n(12),i=n(13),s=n(15),u=n(16),l=n(7),d=n(0),p=n(2),f=n.n(p),h=n(1),g=n(50),b=n(11),m=n(571),A=n.n(m),v=n(90),C=n.n(v);function E(e,t){return t?e.trim():e}var O={useTrim:!0},y={required:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,n=t.useTrim;return""!==E(e,n)},maxLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,r=n.useTrim;return E(e,r).length<=t},minLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,r=n.useTrim;return E(e,r).length>=t},pattern:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,r=n.useTrim;return t.test(E(e,r))}};function S(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function j(){return function(e){return function(e){var t=e.contextTypes,n=e.defaultProps,r=Object.assign({},e.prototype);function a(e){for(var t=r[e],n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,a):void 0}return Object.assign(e.prototype,{UNSAFE_componentWillMount:function(){var e=this.context.form;e&&(e.attachToForm(this),this.setState({_value:"",_validations:[]}));for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.apply(void 0,["componentWillMount"].concat(n))},componentWillUnmount:function(){var e=this.context.form;e&&e.detachFromForm(this);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return a.apply(void 0,["componentWillUnmount"].concat(n))},getValue:function(){var e=(this.state||{})._value;return null==e?"":e},setValue:function(e,t){this.setState({_value:e},(function(){"function"==typeof t&&t()}))},getValidationMessage:function(){var e=this.getValidationMessages();return e&&e[0]},getValidationClassName:function(){var e=(this.state||{})._validations;return e&&e[0]&&e[0].className},getValidationMessages:function(){var e=(this.state||{})._validations;return null==e?void 0:e.map((function(e){var t=e.message;return t?"string"==typeof t?t:t.message||"未知错误":""}))},setValidations:function(e){var t=this;this.setState({_validations:e},(function(){return t.forceUpdate()}))},clearValidations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=this.state||{},r=n._validations;r&&r.length>0&&this.setState(Object.assign(Object.assign({},e),{},{_validations:[]}),t)},addValidation:function(e){this.setState((function(t){var n=t._validations;return{_validations:[e].concat(S(o.a,n||[]))}}))},addManualValidation:function(e){this.addValidation({type:"manual",message:e})},validate:function(){this.context.form.validate(this)}}),Object.assign(e,{contextTypes:Object.assign(Object.assign({},t),{},{form:f.a.object}),defaultProps:Object.assign(Object.assign({},n),{},{validations:[]})}),e}(e)}}var B=["children","onRef"];function I(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var Q=function(e){Object(s.a)(n,e);var t=w(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={isValid:!0},e.inputs=[],e.attachToForm=function(t){var n=t.props.name;if(!n||e.inputs.includes(n))throw new Error("form input must specify a unqie name, but current is ".concat(n));e.inputs.push(t)},e.detachFromForm=function(t){var n=e.inputs.indexOf(t);-1!==n&&(e.inputs=[].concat(I(o.a,e.inputs.slice(0,n)),I(o.a,e.inputs.slice(n+1))))},e.validate=function(e){var t=e.state._value,n=e.props.validations,r=[],a=[];return n?(!Array.isArray(n)&&n.type&&(n=[n]),n.forEach((function(e){var n=e.type,c=e.value,i=e.options,s=y[n];if(!s)throw new Error("no ".concat(n," rules, please define it at Form.validateRules"));var u=s(t,c,i);A()(u)?a=[].concat(I(o.a,a),[u.then((function(){}),(function(){r.push(e)}))]):u||(r=[].concat(I(o.a,r),[e]))})),Promise.all(a).then((function(){return e.setValidations(r),r}))):r},e.handleSubmit=function(t){t.preventDefault();var n=e.props,r=n.onPreSubmit,o=n.onSubmit,c=n.isWechat;r(),c?new Promise((function(t){var n=e.inputs.find((function(e){return"username"===e.props.name}));n&&!n.state._value&&Object(g.findDOMNode)(n.inputEl).value&&n.handleChange({target:{value:Object(g.findDOMNode)(n.inputEl).value}});var r=e.inputs.find((function(e){return"password"===e.props.name}));r&&!r.state._value&&n&&Object(g.findDOMNode)(n.inputEl).value&&r.handleChange({target:{value:Object(g.findDOMNode)(r.inputEl).value}}),t()})).then((function(){e.validateAll().then((function(t){if(t){var n=e.inputs.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(a.a)({},t.props.name,t.state._value))}),{});o(n)}}))})):e.validateAll().then((function(t){if(t){var n=e.inputs.reduce((function(e,t){return Object.assign(Object.assign({},e),{},Object(a.a)({},t.props.name,t.state._value))}),{});o(n)}}))},e}return Object(i.a)(n,[{key:"getChildContext",value:function(){return{form:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,getValue:this.getValue,setValue:this.setValue,validate:this.validate}}}},{key:"componentDidMount",value:function(){}},{key:"validateAll",value:function(){var e=this,t=this.props,n=t.onValid,r=t.onInvalid,a=[],c=[];return this.inputs.forEach((function(t){var n=e.validate(t);A()(n)?c=[].concat(I(o.a,c),[n.then((function(e){a=[].concat(I(o.a,a),I(o.a,e))}))]):n&&(a=[].concat(I(o.a,a),I(o.a,n)))})),Promise.all(c).then((function(){var t=0===a.length;return e.setState({isValid:t},(function(){t?n():r(a.map((function(e){return e.message})))})),t}))}},{key:"render",value:function(){var e=C()(this.props,["onValid","onInvalid","onSubmit","onPreSubmit","isWechat","dispatch"]),t=e.children,n=e.onRef,a=Object(r.default)(e,B);return Object(d.b)("form",Object.assign(Object.assign({noValidate:!0,onSubmit:this.handleSubmit,ref:n},a),{},{children:t}))}}]),n}(h.Component);Q.childContextTypes={form:f.a.object},Q.propTypes={onValid:f.a.func,onInvalid:f.a.func,onSubmit:f.a.func,onPreSubmit:f.a.func},Q.validateRules=y,Q.defaultProps={onValid:function(){},onInvalid:function(){},onSubmit:function(){},onPreSubmit:function(){}};t.b=Object(b.connect)((function(e){return{isWechat:e.env.userAgent.Wechat}}))(Q)},1482:function(e,t,n){"use strict";var r=n(4),a=n(25),o=n(12),c=n(13),i=n(15),s=n(16),u=n(7),l=n(0),d=n(2),p=n.n(d),f=n(1),h=n(6),g=n.n(h),b=n(90),m=n.n(b),A=n(112),v=n(1472),C=["className","inputClassName","errorMessageClassName"];function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.a)(e);if(t){var a=Object(u.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(s.a)(this,n)}}var O=function(e){Object(i.a)(n,e);var t=E(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleErrorHide=function(){e.getValidationMessage()&&e.setState({errorMaskShown:!1},(function(){e.clearValidations({errorMaskShown:!0},(function(){return e.inputEl.focus()}))}))},e.handleKeyUp=function(t){8!==t.keyCode&&9!==t.keyCode||e.clearValidations()},e.handleChange=function(t){var n=t.target.value,r=e.props.onChange;e.setValue(n),"function"==typeof r&&r(n)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&this.setValue(e),this.setState({errorMaskShown:!0})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.manualValidateError,r=t.type,a=t.smsType,o=e.manualValidateError,c=e.type,i=e.defaultValue,s=e.smsType;!n&&o||"string"==typeof n&&n!==o?this.addManualValidation(o):n&&!o&&this.clearValidations({errorMaskShown:!0}),r===c&&a===s||(this.setValue(i),this.clearValidations({errorMaskShown:!0}))}},{key:"render",value:function(){var e,t=this,n=m()(this.props,["validations","defaultValue","onChange","smsType","manualValidateError","dispatch"]),o=n.className,c=n.inputClassName,i=n.errorMessageClassName,s=Object(a.default)(n,C),u=(this.state||{}).errorMaskShown,d=this.getValue(),p=this.getValidationMessage();return Object(l.c)("div",{className:g()("SignFlowInput",o),children:[Object(l.b)(A.a,Object.assign({onRef:function(e){t.inputEl=e},value:d,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onClick:this.handleErrorHide,onBlur:function(){return t.validate()},className:c},s)),Object(l.b)("div",{className:g()("SignFlowInput-errorMask",this.getValidationClassName(),(e={},Object(r.a)(e,i,p),Object(r.a)(e,"SignFlowInput-requiredErrorMask",!d),Object(r.a)(e,"SignFlowInput-errorMask--hidden",!p||!u),e)),onClick:this.handleErrorHide,children:p})]})}}]),n}(f.Component);O.propTypes={inputClassName:p.a.string,errorMessageClassName:p.a.string,manualValidateError:p.a.node};t.a=Object(v.a)()(O)},1483:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(25),a=n(6),o=n.n(a),c=["className","label","tabIndex"];function i(e){return"Enter"===e.key||" "===e.key||"Enter"===e.code||"Space"===e.code||13===e.keyCode||32===e.keyCode}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.className,a=t.label,s=void 0===a?"":a,u=t.tabIndex,l=void 0===u?0:u,d=Object(r.default)(t,c);return Object.assign(Object.assign({role:"button",tabIndex:l,onClick:e,onKeyDown:function(t){i(t)&&e(t)},className:o()("a11y-button",n)},s&&{"aria-label":s}),d)}},1508:function(e,t,n){"use strict";var r=n(25),a=n(12),o=n(13),c=n(15),i=n(16),s=n(7),u=n(0),l=n(2),d=n.n(l),p=n(1),f=n(11),h=n(137),g=n(90),b=n.n(g),m=n(1453),A=n(375),v=n(1482),C=n(10),E=n(1371);function O(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}p.Component;var S=["supportedCountries","onChange","defaultPhoneNo","type","defaultSelectedCountry","supportedCountriesShown","placeholderPrefix","getPlaceholder","selectClassName"];function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var B=function(e){Object(c.a)(n,e);var t=j(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={selectedCountry:null},e.handleSelect=function(t,n){var r=e.props,a=r.supportedCountries,o=r.onSelect,c=a[n];e.setState({selectedCountry:c}),o(c)},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.supportedCountries,n=e.getSupportedCountries;t&&t.length||n()}},{key:"render",value:function(){var e=b()(this.props,["getSupportedCountries","onSelect"]),t=e.supportedCountries,n=e.onChange,a=e.defaultPhoneNo,o=e.type,c=e.defaultSelectedCountry,i=e.supportedCountriesShown,s=e.placeholderPrefix,l=void 0===s?"":s,d=e.getPlaceholder,p=e.selectClassName,f=Object(r.default)(e,S),g=this.state.selectedCountry||c,m=g.name,A=g.code,C=Boolean(i&&t&&t.length);return Object(u.c)("div",{className:"SignFlow-account",children:[C&&Object(u.c)(u.a,{children:[Object(u.b)("div",{className:"SignFlow-supportedCountriesSelectContainer",children:Boolean(t)&&Boolean(t.length)&&Object(u.b)(h.b,{plain:!0,targetClassName:p,text:"".concat(m," ").concat(A),onChange:this.handleSelect,children:t.map((function(e,t){var n=e.name,r=e.code;return Object(u.b)(h.a,{value:"".concat(n," ").concat(r)},t)}))})}),Object(u.b)("span",{className:"SignFlow-accountSeperator",children:" "})]}),Object(u.b)(v.a,Object.assign({className:"SignFlow-accountInputContainer",name:"register"===o?"phoneNo":"username",inputClassName:"SignFlow-accountInput",placeholder:d(o,l),onChange:n,defaultValue:a,validations:[{type:"required",message:d(o,"请输入")}],type:"digits"===o||"register"===o?"tel":"text"},f))]})}}]),n}(p.Component);B.propTypes={defaultPhoneNo:d.a.string,defaultSelectedCountry:d.a.object,supportedCountries:d.a.array,onSelect:d.a.func,onChange:d.a.func,getSupportedCountries:d.a.func,type:d.a.oneOf(["register","digits","password"]).isRequired,supportedCountriesShown:d.a.bool,placeholderPrefix:d.a.string,getPlaceholder:d.a.func},B.defaultProps={defaultPhoneNo:"",defaultSelectedCountry:{name:"中国",code:"+86"},supportedCountriesShown:!0,getPlaceholder:function(e,t){var n="digits"===e||"register"===e?"手机号":"手机号或邮箱";return"".concat(t).concat(n)}};t.a=Object(f.connect)((function(e){return{supportedCountries:e.sms.supportedCountries}}),{getSupportedCountries:A.b})((function(e){var t=Object(m.b)().selectClassName;return Object(u.b)(B,Object.assign(Object.assign({},e),{},{selectClassName:t}))}))},1542:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var o=r[r.length-1]||{};return n.reduce((function(t,n,a){return t.concat(Number.isInteger(n)&&r[n]||o[n],e[a+1])}),[e[0]]).join("")}}n.d(t,"a",(function(){return r}))},1543:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return c}));var r=n(47),a=n.n(r);function o(){a.a.set("ftasl","1")}function c(){return a.a.get("ftasl")||!1}},1607:function(e,t,n){"use strict";var r=n(25),a=n(12),o=n(13),c=n(15),i=n(16),s=n(7),u=n(0),l=n(2),d=n.n(l),p=n(1),f=n(6),h=n.n(f),g=n(20),b=n(90),m=n.n(b),A=["className","disabled"];function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var C=function(e){Object(c.a)(n,e);var t=v(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).clearTimer=function(){r.timer&&window.clearInterval(r.timer)},r.handleClick=function(e){r.state.isCounting||r.startTiming(e)},r.state={countDownTime:e.countDownTime,isCounting:!1},r.isInitialState=!0,r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.startAtOnce&&this.startTiming()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.interceptTime,r=t.reStartTime,a=e.interceptTime,o=e.reStartTime;n!==a&&this.resetTiming(),r!==o&&(this.resetTiming(),this.startTiming())}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"resetTiming",value:function(){this.clearTimer(),this.setState({countDownTime:this.props.countDownTime,isCounting:!1})}},{key:"startTiming",value:function(e){var t=this,n=this.props,r=n.event,a=n.countDownEndEvent,o=null,c=function(){t.isInitialState=!1,t.setState({isCounting:!0}),t.timer=setInterval((function(){var e=t.state.countDownTime;e<=0?(a&&a(),t.resetTiming()):t.setState({countDownTime:e-1})}),1e3)};"function"==typeof r&&(o=r(e,c)),!1!==o&&c()}},{key:"renderText",value:function(){var e=this.props,t=e.initialText,n=e.resetText,r=e.countingText,a=this.state,o=a.countDownTime;return a.isCounting?r({count:o}):this.isInitialState?t:n||t}},{key:"render",value:function(){var e=m()(this.props,["initialText","resetText","countingText","startAtOnce","countDownTime","event","interceptTime","countDownEndEvent","reStartTime"]),t=e.className,n=e.disabled,a=Object(r.default)(e,A),o=this.state.isCounting;return Object(u.b)(g.c,Object.assign(Object.assign({className:h()("CountingDownButton",t,{"is-counting":o})},a),{},{onClick:this.handleClick,disabled:n||o,children:this.renderText()}))}}]),n}(p.Component);C.propTypes={countDownTime:d.a.number,startAtOnce:d.a.bool,initialText:d.a.string.isRequired,resetText:d.a.string,countingText:d.a.func.isRequired,event:d.a.func,countDownEndEvent:d.a.func,interceptTime:d.a.number,reStartTime:d.a.number},C.defaultProps={countDownTime:60,startAtOnce:!1,interceptTime:-1,reStartTime:-1};t.a=C},1891:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return fn}));var r=n(25),a=n(12),o=n(13),c=n(15),i=n(16),s=n(7),u=n(0),l=n(1),d=n.n(l),p=n(56),f=n(9),h=n(6),g=n.n(h),b=n(942);function m(e){return"SignContainerModal"===e?"登录框":"登录页"}var A=n(19),v=n(1416),C=n(49),E=n(8),O=Object.assign;function y(e){return d.a.createElement(E.a,O(O({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"CheckCircle24","data-old-api":"CheckCircle24"},e),{className:"ZDI ZDI--CheckCircle24"+(e.className?" ".concat(e.className):"")}),d.a.createElement("g",{fillRule:"evenodd",clipRule:"evenodd"},d.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z"}),d.a.createElement("path",{d:"M10.414 15.175a.75.75 0 010-1.06L15.16 9.37a.75.75 0 011.06 1.06l-4.744 4.745a.75.75 0 01-1.06 0z"}),d.a.createElement("path",{d:"M7.78 11.48a.75.75 0 011.061 0l2.634 2.634a.75.75 0 01-1.06 1.061L7.78 12.541a.75.75 0 010-1.06z"})))}var S=Object.assign;function j(e){return d.a.createElement(E.a,S(S({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"ExclamationCircle24","data-old-api":"ExclamationCircle24"},e),{className:"ZDI ZDI--ExclamationCircle24"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M12 20.5a8.5 8.5 0 100-17 8.5 8.5 0 000 17zm0 1.5c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",fillRule:"evenodd",clipRule:"evenodd"}),d.a.createElement("path",{d:"M12 7a.75.75 0 01.75.75v5a.75.75 0 01-1.5 0v-5A.75.75 0 0112 7z",fillRule:"evenodd",clipRule:"evenodd"}),d.a.createElement("path",{d:"M13 16a1 1 0 11-2 0 1 1 0 012 0z"}))}var B=n(2),I=n.n(B),w=n(11),Q=n(64),k=n(5),T=n(24),N=n(46),R=n(74),D=n.n(R),P=function(e){return D()((function(t){var n=Object(f.l)().trackEvent;return Object(u.b)(e,Object.assign({trackEvent:n},t))}),e)},x=n(412),M=n(360),z=n(57),V=Object.assign;var F=function(e){return d.a.createElement(z.a,V({width:"52",height:"52",fill:"none"},e),d.a.createElement("mask",{id:"id-320414155-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},d.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),d.a.createElement("g",{mask:"url(#id-320414155-a)"},d.a.createElement("path",{fill:"#06F",d:"M0 0l52 52V0H0z"}),d.a.createElement("path",{fill:"#fff",d:"M22.125 4h13.75A4.125 4.125 0 0140 8.125v27.75A4.125 4.125 0 0135.875 40h-13.75A4.125 4.125 0 0118 35.875V8.125A4.125 4.125 0 0122.125 4zm6.938 34.222c1.139 0 2.062-.945 2.062-2.11 0-1.167-.923-2.112-2.063-2.112-1.139 0-2.062.945-2.062 2.111 0 1.166.923 2.111 2.063 2.111zM21 8.333v24h16v-24H21z",fillRule:"evenodd",clipRule:"evenodd"}),d.a.createElement("path",{fill:"#fff",d:"M46.996 15.482L39 19.064l-7.996-3.582A1.6 1.6 0 0132.6 14h12.8a1.6 1.6 0 011.596 1.482zM47 16.646V24.4a1.6 1.6 0 01-1.6 1.6H32.6a1.6 1.6 0 01-1.6-1.6v-7.754l8 3.584 8-3.584z",fillRule:"evenodd",clipRule:"evenodd"}),d.a.createElement("path",{fill:"#06F",d:"M31 15.483v1.17l8 3.577 8-3.577v-1.17l-8 3.581-8-3.581z"})))};function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var q=function(e){Object(c.a)(n,e);var t=U(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).cancelCheckQrcodeScanStatus=function(){r.timer&&window.clearInterval(r.timer)},r.checkQrcodeScanStatus=function(e){var t=r.props,n=t.checkQrcodeScanStatus,a=t.trackEvent,o=t.isSignPage;r.timer=setInterval((function(){n({token:e}).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&!o&&(null==a||a({block:"qrcode_loginSuccess"}))}))}),2e3)},r.handleChangeStatus=function(e,t){r.setState({status:e}),"init"!==e||t||r.getToken(),C.b.increment("logIn.qrcode.".concat(e,".count"),.001)},r.handleChangeLoginType=function(){var e=r.props.onChangeType;r.cancelCheckQrcodeScanStatus(),e()},r.state={type:"password",status:"init",errorMessage:"",guideTypeSymbol:"d"},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.isInSignPage,t=this.state.guideTypeSymbol;e&&A.a.trackCardShow(null,{id:9214,name:t}),this.getToken()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,r=t.qrcodeLoginScanStatus,a=e.qrcodeLoginToken,o=e.qrcodeLoginScanStatus,c=e.qrcodeLoginError,i=e.qrcodeLoginReturnNewToken;""!==a&&n!==a?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.status&&this.handleChangeStatus("init",!0),this.checkQrcodeScanStatus(a)):r!==o?2!==o&&this.handleChangeStatus(1===o?"success":"init",i||1===r&&0===o):c&&c.code&&(this.cancelCheckQrcodeScanStatus(),40321===c.code&&this.setState({status:"error",errorMessage:c.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus()}},{key:"getToken",value:function(){return this.props.getQrcodeLoginToken()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.qrcodeLoginToken,a=t.isInSignPage,o=t.showSwitchTypeIcon,c=t.isBlockType,i=this.state,s=i.status,l=i.errorMessage,d=i.guideTypeSymbol,p=null;return p="init"===s?Object(u.c)("div",{className:"Qrcode-content",children:[Object(u.b)("div",{className:"Qrcode-img",children:r?Object(u.b)("img",{className:"Qrcode-qrcode",width:"150",height:"150",src:"//".concat(N.a.wwwHost,"/api/v3/account/api/login/qrcode/").concat(r,"/image").concat(a?"?utm_campaign=internal&utm_medium=qr&utm_source=login&utm_term=force_launch&utm_content=qrscan".concat(d):""),alt:"二维码"}):Object(u.b)(v.a,{count:3})}),Object(u.c)("div",{className:"Qrcode-guide-message",children:[c&&Object(u.b)("div",{className:"Qrcode-title",children:"扫码登录"}),Object(u.b)(k.Box,{mt:"24px",color:"GBK03A",fontSize:14,fontWeight:"bold",lineHeight:"20px",children:"其他扫码方式：微信"})]})]}):"success"===s?Object(u.c)(u.a,{children:[Object(u.c)("div",{className:"Qrcode-content Qrcode-success",children:[Object(u.b)("div",{className:"Qrcode-scanResultStaus",children:Object(u.b)(y,{fill:"#2db370",size:58})}),Object(u.b)("p",{className:"Qrcode-scanResultTips",children:"扫描成功"}),Object(u.b)("p",{children:"请在手机上「确认登录」"})]}),Object(u.b)("div",{className:"Qrcode-cutButton",children:Object(u.b)("span",{role:"button",tabIndex:0,onClick:function(){return e.handleChangeStatus("init")},children:"返回二维码"})})]}):Object(u.c)("div",{className:"Qrcode-content Qrcode-failure",children:[Object(u.b)("div",{className:g()({"Qrcode-scanResultStaus":c}),children:Object(u.b)(j,{fill:"#ffaa00",size:58})}),c&&Object(u.b)("p",{className:"Qrcode-scanResultTips",children:"扫描失败"}),Object(u.b)("p",{children:l})]}),Object(u.c)("div",{className:g()("Qrcode-container",n),children:[Object(u.b)(k.Box,{color:"GBK03A",fontSize:16,fontWeight:"bold",lineHeight:"23px",children:"打开知乎App"}),Object(u.b)(k.Box,{mt:"8px",mb:"24px",color:"GBK03A",fontSize:14,lineHeight:"20px",children:"在「我的页」左上角打开扫一扫"}),p,o&&Object(u.b)(F,{onClick:this.handleChangeLoginType})]})}}]),n}(l.Component);q.propTypes={type:I.a.string,isShowPasswordLogin:I.a.bool,onChangeType:I.a.func,getQrcodeLoginToken:I.a.func,checkQrcodeScanStatus:I.a.func,isInSignPage:I.a.bool,showSwitchTypeIcon:I.a.bool,isBlockType:I.a.bool},q.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:"",onChangeType:function(){},showSwitchTypeIcon:!0,isBlockType:!1};var L=Object(T.compose)(Q.withRouter,P,Object(w.connect)((function(e,t){var n=e.login;return{qrcodeLoginToken:n.qrcodeLoginToken,qrcodeLoginTokenExpires:n.qrcodeLoginTokenExpires,qrcodeLoginScanStatus:n.qrcodeLoginScanStatus,qrcodeLoginError:n.qrcodeLoginError,qrcodeLoginReturnNewToken:n.qrcodeLoginReturnNewToken,edition:Object(x.b)(e),isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}}),{getQrcodeLoginToken:M.d,checkQrcodeScanStatus:M.a}))(q),J=["isQRCodeShown","onQRCodeLinkClick","zaClickId"],K=function(e){return{padding:"4px 10px",border:"1px solid #EBEBEB",borderRadius:"29px",fontSize:"12px",color:e.colors.GBK03A,lineHeight:"19px",":hover":{background:e.colors.GBK10A},display:"inline-block"}},Z=function(e){var t=e.isQRCodeShown,n=void 0!==t&&t,a=e.onQRCodeLinkClick,o=e.zaClickId,c=Object(r.default)(e,J);return Object(u.c)(k.Flex,Object.assign(Object.assign({fontSize:14,color:"GBL01A",height:"60px",alignItems:"center",justifyContent:"center",css:{boxSizing:"border-box",margin:"26px 0 22px"}},c),{},{children:[Object(u.b)(k.Box,{children:Object(u.b)(k.Button,{css:K,bg:"unset",fontWeight:"inherit",mr:"8px",onClick:a,children:n?"关闭二维码":"下载知乎App"})}),Object(u.b)(k.Box,{css:{whiteSpace:"nowrap"},children:Object(u.b)(k.Link,{href:"/org/signup",css:K,mr:"8px","data-za-detail-view-id":o,children:"开通机构号"})}),Object(u.b)(k.Box,{css:{whiteSpace:"nowrap"},children:Object(u.b)(k.Button,{css:K,bg:"unset",fontWeight:"inherit",onClick:function(){var e;null===(e=window.aria)||void 0===e||e.start()},"data-za-detail-view-id":o,children:"无障碍模式"})})]}))},W=n(132),H=n(296),G=n(29),Y=n(10),_=n(93),X=n(1472),$=n(38),ee=n(20),te=n(1390),ne=function(e){var t=e.onBack,n=e.data,r=n.phoneNo,a=n.code,o=n.targetNo,c=e.onSubmit;return Object(u.c)("div",{className:"SMSIdentify",children:[Object(u.c)("div",{className:"SMSIdentify-back",role:"button",tabIndex:0,onClick:t,children:[Object(u.b)(te.a,{fill:"#8590a6",size:36,center:!0}),"返回"]}),Object(u.b)("div",{className:"SMSIdentify-title",children:"身份验证"}),Object(u.c)("div",{className:"SMSIdentify-tip",children:["请用手机号 ",r.slice(0,-8),"****",r.slice(-4)," 发送短信"]}),Object(u.c)("div",{className:"SMSIdentify-content",children:[Object(u.c)("div",{children:["短信内容",Object(u.b)("span",{children:a})]}),Object(u.c)("div",{children:["发送到号码",Object(u.b)("span",{children:o})]})]}),Object(u.b)("div",{className:"SMSIdentify-submitTip",children:"发送完成后，请点击下方按钮进行校验"}),Object(u.b)(ee.c,{className:"SMSIdentify-submit",preset:"primary",color:"blue",onClick:c,children:"我已发送"})]})};function re(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var ae=Object(w.connect)(null,{getSMSIdentify:M.e,postSMSIdentify:M.f,showNotification:$.g})((function(e){var t=e.getSMSIdentify,n=e.postSMSIdentify,r=e.showNotification,a=e.onBack,o=e.phoneNo,c=Object(l.useState)({code:"",phoneNo:"",targetNo:""}),i=re(Y.a,c,2),s=i[0],d=i[1];Object(l.useEffect)((function(){A.a.trackCardShow(null,{id:5935})}),[]),Object(l.useEffect)((function(){o&&t(o).then((function(e){var t=e.payload;t&&d(t)})).catch((function(e){var t=e.payload;t&&d(t)}))}),[t,o]);var p=ne;return Object(u.b)(p,{onBack:a,onSubmit:function(){A.a.trackEvent(null,{id:23456}),n(o).then((function(e){var t=e.payload;A.a.trackEvent(null,{id:6729,action:"Click",name:t.success?"通过":"失败"}),t.success?a():r("没有收到短信，请稍后重试","red")}))},data:s})})),oe=function(e){var t=e.captcha,n=t.captchaNeeded,r=t.captchaValidated,a=t.v2,o=e.login,c=o.loginConfirmSucceeded,i=o.loginConfirmError,s=o.sendDigitsError,u=o.needSMSIdentify,l=o.loginUnregisteredError,d=o.verification,p=e.register;return{loginConfirmSucceeded:c,loginConfirmError:i,sendDigitsError:s,loginUnregisteredError:l,captchaNeeded:n,captchaValidated:r,registerValidateErrors:p.registerValidateErrors,registerConfirmError:p.registerConfirmError,registerConfirmSucceeded:p.registerConfirmSucceeded,needSMSIdentify:u,captchaV2:a,verification:d}},ce=n(1453),ie=n(1483),se=Object.assign;var ue=function(e){return d.a.createElement(z.a,se({width:"52",height:"52",fill:"none",xmlnsXlink:"http://www.w3.org/1999/xlink"},e),d.a.createElement("mask",{id:"id-3757926926-a",width:"52",height:"52",x:"0",y:"0",maskUnits:"userSpaceOnUse"},d.a.createElement("path",{fill:"#fff",d:"M0 0l52 52V0H0z"})),d.a.createElement("g",{mask:"url(#id-3757926926-a)"},d.a.createElement("path",{fill:"#06F",d:"M0 0h48a4 4 0 014 4v48L0 0z"}),d.a.createElement("path",{fill:"url(#pattern0)",d:"M0 0h52v52H0z"})),d.a.createElement("defs",null,d.a.createElement("pattern",{id:"pattern0",width:"1",height:"1",patternContentUnits:"objectBoundingBox"},d.a.createElement("use",{transform:"scale(.00216)",xlinkHref:"#image0"})),d.a.createElement("image",{id:"image0",width:"463",height:"463",xlinkHref:"data:image/png;base64,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"})))},le=function(e){var t=e.type,n=e.showSwitchTypeIcon,r=Object(ce.b)().handleChangeType;return Object(u.c)("div",{className:"SignFlow-tabs",children:[Object(u.b)(f.a,{as:"div",zaText:"免密码登录",zaType:"Button",zaAction:"Save",className:g()("SignFlow-tab",{"SignFlow-tab--active":"digits"===t}),role:"button",tabIndex:0,onClick:function(){"digits"!==t&&r("digits")},onKeyDown:function(e){Object(ie.b)(e)&&"digits"!==t&&r("digits")},children:"验证码登录"}),Object(u.b)(f.a,{as:"div",zaText:"密码登录",zaType:"Button",zaAction:"Save",className:g()("SignFlow-tab",{"SignFlow-tab--active":"password"===t}),role:"button",tabIndex:0,onClick:function(){"password"!==t&&r("password")},onKeyDown:function(e){Object(ie.b)(e)&&"password"!==t&&r("password")},children:"密码登录"}),n&&Object(u.b)(f.a,{as:"div",zaText:"二维码图片登录",zaType:"Button",zaAction:"Save",role:"button",tabIndex:0,"aria-label":"二维码图片",className:"SignFlow-qrcodeTab",onClick:function(){r("qrcode")},children:Object(u.b)(ue,{})})]})};le.propTypes={showSwitchTypeIcon:I.a.bool},le.defaultProps={showSwitchTypeIcon:!0};var de=le,pe=n(1508),fe=["type","isOversea","supportedCountriesShown","selectedCountry","username","usernameServerError","customErrorInputMap"],he=function(e){var t=e.type,n=e.isOversea,a=e.supportedCountriesShown,o=e.selectedCountry,c=e.username,i=e.usernameServerError,s=e.customErrorInputMap,l=(s=void 0===s?{}:s).username,d=Object(r.default)(e,fe),p=Object(ce.b)().handleChange;return Object(u.b)(pe.a,Object.assign({type:"digits"===t||a?"digits":"password",supportedCountriesShown:"digits"===t||n,onChange:function(e){return p("username",e)},onSelect:function(e){return p("selectedCountry",e)},defaultSelectedCountry:o,manualValidateError:i||l,defaultValue:c},d))},ge=n(4),be=n(1482),me=["onChange","validations"];function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var ve=function(e){Object(c.a)(n,e);var t=Ae(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.validations,a=Object(r.default)(e,me);return Object(u.b)(be.a,Object.assign({className:"SignFlow-username",onChange:t,validations:n||[{type:"required",message:"请输入用户名"}]},a))}}]),n}(l.Component);ve.propTypes={onChange:I.a.func.isRequired};var Ce=ve,Ee=Object.assign;function Oe(e){return d.a.createElement(E.a,Ee(Ee({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"EyeAlt24","data-old-api":"EyeAlt24"},e),{className:"ZDI ZDI--EyeAlt24"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M12.001 20.717c5.343 0 8.282-3.087 9.674-5.294a5.88 5.88 0 00.392-5.525C20.919 7.293 18.107 3.283 12 3.283c-6.103 0-8.916 4.005-10.066 6.61l1.372.606-1.372-.606a5.882 5.882 0 00.392 5.534c1.395 2.207 4.334 5.29 9.674 5.29zm-8.406-6.091a4.382 4.382 0 01-.288-4.127c1.025-2.322 3.425-5.716 8.694-5.716 5.272 0 7.67 3.398 8.693 5.72a4.38 4.38 0 01-.288 4.12c-1.224 1.94-3.75 4.594-8.405 4.594-4.653 0-7.18-2.65-8.406-4.591zM9.75 12a2.25 2.25 0 114.5 0 2.25 2.25 0 01-4.5 0zM12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z",fillRule:"evenodd",clipRule:"evenodd"}))}var ye=n(1419),Se=n(90),je=n.n(Se),Be=["switchDisabled","placeholderPrefix"];function Ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var we=function(e){Object(c.a)(n,e);var t=Ie(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleSwitchPasswordInputType=function(){r.setState((function(e){return{inputType:"password"===e.inputType?"text":"password"}}))},r.handleChange=function(e){r.state.hasValue!==Boolean(e)&&r.setState({hasValue:Boolean(e)}),r.props.onChange(e)},r.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},r}return Object(o.a)(n,[{key:"render",value:function(){var e=je()(this.props,["onChange","defaultType"]),t=e.switchDisabled,n=e.placeholderPrefix,a=Object(r.default)(e,Be),o=this.state,c=o.inputType,i=o.hasValue;return Object(u.c)("div",{className:"SignFlow-password",children:[Object(u.b)(be.a,Object.assign({name:"password",inputClassName:"password"===c&&i?"SignFlow-passwordInput":"",type:c,placeholder:"".concat(n||"","密码"),onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"请输入密码",className:"SignFlow-requiredPasswordErrorMask"}]},a)),!t&&Object(u.b)(ee.c,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType,icon:"password"===c?Oe:ye.a})]})}}]),n}(l.Component);we.propTypes={onChange:I.a.func.isRequired,switchDisabled:I.a.bool,defaultType:I.a.string},we.defaultProps={defaultType:"password"};var Qe,ke=function(e){var t=e.handleRegister,n=e.setState,r=e.usernameServerError,a=e.passwordServerError,o=e.submitDisabled,c=Object(w.useDispatch)(),i=Object(_.a)((function(e){return function(t){return n(Object(ge.a)({},e,t))}}));return Object(u.c)(X.b,{className:"SignFlow-setting",onSubmit:t,children:[Object(u.c)("div",{role:"button",tabIndex:0,className:"SignFlow-back",onClick:function(){return c(M.g.apply(void 0,arguments))},children:[Object(u.b)(te.a,{center:!0,size:28,fill:"#8590a6"}),"返回"]}),Object(u.b)("div",{className:"SignFlow-settingTitle",children:"设置用户名和密码"}),Object(u.b)(Ce,{name:"fullname",placeholder:"用户名",onChange:i("fullname"),manualValidateError:r}),Object(u.b)(we,{onChange:i("password"),placeholderPrefix:"8 位数字或字母",defaultType:"text",manualValidateError:a}),Object(u.b)(ee.c,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:o,children:"进入知乎"})]},"setting")},Te=n(106),Ne=n(1607),Re=n(1542),De=["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"];function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var xe=function(e){Object(c.a)(n,e);var t=Pe(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.countDownEvent,a=t.countDownEndEvent,o=t.startAtOnce,c=t.interceptTime,i=t.isEmail,s=t.reStartTime,l=t.smsType,d=Object(r.default)(t,De);return e=i?"邮箱":"voice"===l?"语音":"短信",Object(u.c)("div",{className:"SignFlow SignFlow-smsInputContainer",children:[Object(u.b)(be.a,Object.assign({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:l,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"输入 6 位".concat(e,"验证码"),validations:[{type:"required",message:"请输入".concat(e,"验证码"),className:"SignFlow-smsInputRequiredErrorMask"}]},d)),Object(u.b)(Ne.a,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"获取".concat(e,"验证码"),resetText:"重新获取".concat(e,"验证码"),countingText:Object(Re.a)(Qe||(Qe=Object(Te.a)([""," 秒后可重发"])),"count"),startAtOnce:o,event:n,countDownEndEvent:a,interceptTime:c,reStartTime:s})]})}}]),n}(l.Component);xe.propTypes={countDownEvent:I.a.func.isRequired,startAtOnce:I.a.bool,interceptTime:I.a.number,reStartTime:I.a.number,isEmail:I.a.bool,countDownEndEvent:I.a.func,smsType:I.a.string},xe.defaultProps={startAtOnce:!1,isEmail:!1};var Me=xe,ze=["type","smsInputInterceptTime","digitsServerError","smsType","reStartTime","passwordServerError","password"],Ve=function(e){var t=e.type,n=e.smsInputInterceptTime,a=e.digitsServerError,o=e.smsType,c=e.reStartTime,i=e.passwordServerError,s=e.password,l=Object(r.default)(e,ze),d=Object(ce.b)(),p=d.handleSendDigits,f=d.setState,h=Object(_.a)((function(){f({smsBackUpDisplay:!0})})),g=Object(_.a)((function(e){return f({digits:e})})),b=Object(_.a)((function(e){return f({password:e})}));return Object(u.c)(u.a,{children:["digits"===t&&Object(u.b)(u.a,{children:Object(u.b)(Me,Object.assign({countDownEvent:p,countDownEndEvent:h,interceptTime:n,manualValidateError:a,smsType:o,reStartTime:c,onChange:g},l))}),"password"===t&&Object(u.b)(u.a,{children:Object(u.b)(we,Object.assign({onChange:b,manualValidateError:i,defaultValue:s},l))})]})},Fe=function(e){var t=e.smsBackUpName,n=e.smsBackUpDisplay,r=e.isOverSea,a=e.smsType,o=e.type,c=e.containerType,i=Object(ce.b)(),s=i.handleChangeType,l=i.setState,d=Object(_.a)((function(){A.a.trackEvent(event.currentTarget,{id:4947}),A.a.trackEvent(void 0,{action:"Click",element:"Button",element_name:"ResetPassword"}),window.open("".concat(G.x,"/account/password_reset"),"_blank")})),p=Object(_.a)((function(e){A.a.trackEvent(e.currentTarget,{id:4941}),l({smsType:"text"===a?"voice":"text",smsBackUpName:"text"===a?"短信":"语音",reStartTime:Date.now()})})),h={configMap:{containerType:m(c)}};return Object(u.c)("div",{className:"Login-options",children:[Object(u.b)(f.a,{as:ee.c,zaText:r?"邮箱帐号登录":"海外手机号登录",zaType:"Button",zaAction:"Expand",extra:h,preset:"plain",className:"Login-switchType",onClick:function(){"digits"!==o&&s(r?"email":"oversea")},children:"digits"!==o&&(r?"邮箱帐号登录":"海外手机号登录")}),Object(u.b)(ee.c,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===o?p:d,children:"digits"===o?n&&Object(u.c)(f.f,{zaType:"Text",zaText:"免密码登录",extra:h,children:["获取",t,"验证码"]},"noPassword"):Object(u.b)(f.f,{zaType:"Text",zaText:"密码登录",extra:h,children:"忘记密码"},"forgetPassword")})]})},Ue=function(e){var t=e.submitDisabled,n=e.type,r=e.containerType,a=Object(l.useMemo)((function(){return"password"!==n&&N.a.allowSignUp?"登录/注册":"登录"}),[n]);return Object(u.b)(f.a,{as:ee.c,zaText:"登录",zaType:"Button",zaAction:"Signin",extra:{configMap:{containerType:m(r),signinType:n}},type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue",disabled:t,children:a})},qe=n(531),Le=n.n(qe),Je=function(e,t,n){var r=Object(_.a)(t);Object(l.useEffect)((function(){return Le.a.bind(e,r,n),function(){Le.a.unbind(e)}}),[JSON.stringify(e),r,n])},Ke=n(675),Ze=n(1452),We=n(67),He=n.n(We),Ge=n(183),Ye=n(754);function _e(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function Xe(e,t){var n,r=e.onReady,a=e.onVerify,o=e.onClose,c=Object(w.useSelector)((function(e){return e.captcha})).v2,i=Object(l.useRef)(null),s=Object(Ye.a)(),d=null==c||null===(n=c.script)||void 0===n?void 0:n[1],p=Object(l.useRef)(null),f=Object(l.useRef)(),h=Object(l.useRef)(),g=Object(l.useState)("init"),b=_e(Y.a,g,2),m=b[0],A=b[1];Object(l.useEffect)((function(){if(null!=c&&c.script){var e=d?He.a.parse(null==d?void 0:d.split("?")[1]).captchaId:"0";return p.current&&p.current!==e?(s.confirm("页面将自动刷新，请在刷新后重试",{title:"验证码已过期",ok:"刷新"}).then((function(){location.reload()})).catch((function(){i.current&&clearTimeout(i.current)})),i.current=setTimeout((function(){location.reload()}),5e3)):p.current=e,function(){i.current&&clearTimeout(i.current)}}}),[c,d,s]),Object(l.useImperativeHandle)(t,(function(){return{get required(){return Boolean(c)},get ready(){return Boolean(h.current)},get type(){var e;return(null===(e=h.current)||void 0===e?void 0:e.type)||"vendor"},show:function(){var e;null===(e=h.current)||void 0===e||e.show()},close:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.close()},refresh:function(){var e;return null===(e=h.current)||void 0===e?void 0:e.refresh()}}}));var v=Object(_.a)((function(e){var t;if(null!==(t=e.script)&&void 0!==t&&t.length){A("loading");var n,c,i=e.script.map((function(e){return function(){return Object(Ge.loadScript)(e)}}));(n=i,c=[],n.reduce((function(e,t){return e.then((function(){return t().then((function(e){c.push(e)}))}))}),Promise.resolve()).then((function(){return c}))).then((function(){return A("mount"),window.ZS_CAP.init({element:f.current,callback:function(e){null==a||a(e)},enableClose:!0,onClose:o})})).then((function(e){h.current=e,A("ready"),null==r||r()})).catch((function(e){var t;return null===(t=window.Raven)||void 0===t?void 0:t.captureException(e)}))}else A("bypass")}));return Object(l.useEffect)((function(){c&&"init"===m&&v(c)}),[c,m,v]),c?Object(u.b)("div",{ref:f}):null}var $e=d.a.memo(d.a.forwardRef(Xe)),et=function(e){var t=e.type,n=e.captchaV2,r=Object(w.useDispatch)();return Object(_.a)((function(){"qrcode"!==t&&(n&&r(Object(Ke.d)()),r(Object(Ke.a)("captcha_sign_in")))}))},tt=function(e){var t=e.type,n=e.captchaV2Ref,r=e.onVerify,a=e.lastSubmittedTimestamp,o=Object(w.useDispatch)(),c=Object(ce.b)(),i=c.continueActionRef,s=c.captchaV2,d=et({type:t,captchaV2:s});Object(l.useEffect)((function(){d(),C.b.increment("logIn.captcha.request.count",.001)}),[d]),Je(["esc"],(function(){var e;null===(e=n.current)||void 0===e||e.close()}));return Object(l.useEffect)((function(){var e;a&&(-1!==a&&(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh()))}),[a,n]),Object(u.b)($e,{ref:n,onVerify:function(e){if(e instanceof Error)return C.b.increment("logIn.captcha.wrong.count"),o(Object($.g)(e.message||"验证失败","red"));if(null==e||!e.type||null==e||!e.result)return o(Object($.g)("错误的验证方式","red"));var t=e.result;o(Object(Ke.c)(JSON.stringify(t),!0,"captcha_sign_in")).then((function(e){var t,n=e.payload;null!=n&&n.success&&(null==r||r({result:"success"}),null!=i&&i.current&&(null===(t=i.current)||void 0===t||t.call(i)))})).catch((function(e){var t;if(null==r||r({result:"fail"}),"ResponseError"!==(null==e?void 0:e.name)||120001!==(null===(t=e.payload)||void 0===t?void 0:t.code))throw o(Object($.g)(Object(Ze.b)(e),"red")),e;o(Object($.g)("页面已过期，请刷新页面重试","red"))})).finally((function(){var e;i&&(i.current=null),null===(e=n.current)||void 0===e||e.close()}))},onClose:function(){var e;a||(console.log("captcha refresh!"),null===(e=n.current)||void 0===e||e.refresh())}})},nt=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rt=function(e){return nt.test(e)},at=function(e){var t=e.props,n=e.setState,r=e.state,a=t.onChangeType,o=t.type,c=t.captchaV2,i=Object(w.useDispatch)(),s=r.username,u=et({props:t});return Object(_.a)((function(e){i(Object(M.g)()),a(e),"qrcode"!==e&&"password"!==e||A.a.trackEvent(null,{action:"Click",name:"qrcode"===e?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==e&&(n({username:"password"===o&&rt(s)?"":s,smsBackUpDisplay:!0}),c||u())}))},ot=function(e){var t,n=e.loginConfirmError,r=e.sendDigitsError,a=e.registerValidateErrors,o=(t=n,Object(l.useMemo)((function(){var e=t||{};return{loginUsernameServerError:e.username,passwordServerError:e.password,digitsServerError:e.digits,captchaServerError:e.captcha,undefinedLoginError:e.unknown,validateDigitsError:e.validateDigitsError}}),[t])),c=o.loginUsernameServerError,i=o.passwordServerError,s=o.digitsServerError,u=o.captchaServerError,d=o.undefinedLoginError,p=o.validateDigitsError,f=function(e){return Object(l.useMemo)((function(){var t=e||{};return{sendDigitsUsernameServerError:t.username,undefinedDigitsError:t.unknown}}),[e])}(r),h=f.sendDigitsUsernameServerError,g=f.undefinedDigitsError,b=function(e){return Object(l.useMemo)((function(){var t=e||{},n=t.fullname,r=(n=void 0===n?{}:n).message,a=t.password;return{fullnameError:r,registerPasswordServerError:(a=void 0===a?{}:a).message}}),[e])}(a),m=b.fullnameError,A=b.registerPasswordServerError;return{usernameServerError:h||c,passwordServerError:i||A,digitsServerError:s||p,captchaServerError:u,fullnameError:m,undefinedLoginError:d,undefinedDigitsError:g}},ct=function(e){var t=e.setState,n=Object(w.useDispatch)();return Object(_.a)((function(e,r){n(Object(M.g)()),t(Object(ge.a)({},e,r))}))},it=function(e){var t=e.state,n=t.selectedCountry.code,r=t.username;return Object(_.a)((function(){return"+86"!==n||/^\d{11}$/.test(r)}))},st=n(151),ut=n(725);function lt(e,t){if(!e)return{};var n,r=e=e.trim(),a=rt(e);if(!a){var o={hasCode:(n=e).startsWith("+")||n.startsWith("00"),parsedPhoneNo:n.startsWith("00")?"+".concat(n.slice(2)):n};r=o.hasCode?o.parsedPhoneNo:"".concat(t).concat(e)}return{value:r,isEmail:a}}var dt=function(e){var t=e.props,n=e.setState,r=e.runBeforeResetValidateResult,a=e.runBeforeCheckCaptcha,o=e.testPhoneNo,c=e.continueActionRef,i=e.selectedCountry,s=e.captcha,u=e.customErrorInputMap,l=e.username,d=e.trackLoginSuccess,p=t.type,f=t.isOverSea,h=t.nextUrl,g=Object(w.useDispatch)();return Object(_.a)((function(e){A.a.trackEvent(void 0,{id:4948}),r((function(){if("digits"!==p&&!f||o()){C.b.increment("logIn.clickLogInBtn.count",.1);var t=function(){var t=Object(st.c)(h),r=t.utm_source,a=t.utm_medium,o=Object.assign(Object.assign({},e),{},{username:lt(e.username,i.code).value,captcha:s,utmSource:r,refSource:a});n({lastSubmittedTimestamp:Date.now()}),g(Object(M.i)(Object(ut.a)(p,o))).then((function(e){var t;null!==(t=e.payload)&&void 0!==t&&t.accessToken&&(null==d||d())}))};c.current=t,a().then((function(e){e&&t()})).finally((function(){return n({submitDisabled:!1})}))}else n({customErrorInputMap:Object.assign(Object.assign({},u),{},{username:l?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}))}))},pt=function(e){var t=document.querySelectorAll(".yidun_modal"),n=function(e){var t,n=document.createElement("button");return n.style.position="absolute",n.style.top="15px",n.style.right="15px",n.style.fontSize="16px",n.innerText="✕",n.setAttribute("tabindex","0"),n.addEventListener("click",e),(t=n)&&(t.addEventListener("focus",(function(e){e.target.style.boxShadow="0 0 0 2px #ffffff, 0 0 0 4px rgb(0 102 255 / 30%)"}),!0),t.addEventListener("blur",(function(e){e.target.style.boxShadow="none"}),!0)),n}((function(){var t;return null===(t=e.current)||void 0===t?void 0:t.close()}));Array.from(t).forEach((function(e){e.appendChild(n),function(e){e.querySelector(".yidun_tips").removeAttribute("aria-live")}(e),function(e){var t=e.querySelector(".yidun_modal__title");t.setAttribute("tabindex","-1"),t.innerText="请完成安全验证，可使用语音验证",t.addEventListener("focus",(function(){t.style.outline="none"})),setTimeout((function(){t.focus()}),500)}(e)}))},ft=function(e){var t=e.customErrorInputMap,n=e.smsType,r=e.selectedCountry.code,a=e.username,o=e.testPhoneNo,c=e.captchaV2Ref,i=e.runBeforeResetValidateResult,s=e.setState,u=e.captchaNeeded,l=e.continueActionRef,d=Object(w.useDispatch)();return Object(_.a)((function(e,p){return i((function(){var e;if(o()){var i=lt(a,r).value,f=function(){d(Object(M.h)(i,n)),s({smsBackUpDisplay:!1})};if(!a||u){if(u&&null!==(e=c.current)&&void 0!==e&&e.required){c.current.show(),pt(c);return l.current=function(){f(),p()},!1}s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:a?"":"请输入手机号"})})}else f()}else s({customErrorInputMap:Object.assign(Object.assign({},t),{},{username:a?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})}),!u)}))},ht={username:null,password:null,captcha:null,digits:null},gt=function(e){var t=e.setState,n=Object(w.useDispatch)();return Object(_.a)((function(e,r){return n(Object(M.g)()),t({customErrorInputMap:Object.assign({},ht),validationResult:{needsRefresh:!1,timestamp:Date.now()}},e),r}))},bt=function(e){var t=e.props,n=e.captchaV2Ref,r=t.captchaValidated,a=t.captchaNeeded;return Object(_.a)((function(){if(!r&&a){var e;if(null!==(e=n.current)&&void 0!==e&&e.required)return n.current.show(),pt(n),Promise.resolve(!1);console.warn("Captcha is unavailable.")}return Promise.resolve(!0)}))},mt=n(758),At=n(753),vt=function(e){var t=e.registerConfirmSucceeded,n=e.loginConfirmSucceeded,r=e.sendDigitsError,a=e.nextUrl,o=e.username,c=e.isInSignPage,i=e.loginConfirmError,s=e.setState,u=e.loginUnregisteredError,d=e.loginBindWechatError,p=e.type,f=e.verification,h=Object(w.useDispatch)();Object(l.useEffect)((function(){!i||u||d||(h(Object(Ke.e)(p)),h(Object(Ke.a)()))}),[i,u,d,s,h,p]),Object(l.useEffect)((function(){(n||t)&&(Object(At.b)(o),null!=f&&f.isZombie&&Object(mt.b)(f),a?location.href=a:c?location.href="/":location.reload())}),[n,t]),Object(l.useEffect)((function(){if(r||!1===n){var e=r?{smsInputInterceptTime:Date.now()}:{};s(Object.assign(Object.assign({},e),{},{captchaValidated:!1,captchaNeeded:!0}))}}),[r,n]),Object(l.useEffect)((function(){r&&null===i&&s({smsBackUpDisplay:!0})}),[r])},Ct="UPDATE_STATE",Et=function(e){return{smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,selectedCountry:e.selectedCountry,username:e.username,password:e.password,fullname:"",customErrorInputMap:Object.assign({},ht),submitDisabled:!1,lastSubmittedTimestamp:-1}},Ot=function(e,t){var n=t.type,r=t.callback;if(n===Ct){var a=t.payload;return r&&r(e),Object.assign(Object.assign({},e),a)}return e},yt=n(530),St=function(e){var t=e.props,n=e.captchaV2Ref,r=e.continueActionRef,a=e.setState,o=e.selectedCountry.code,c=e.username,i=e.fullname,s=e.digits,u=e.password,l=Object(w.useDispatch)(),d=bt({props:t,captchaV2Ref:n});return Object(_.a)((function(){var e=function(){l(Object(yt.d)({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(o).concat(c),fullname:i,digits:s,password:u}))};r&&(r.current=e),a({submitDisabled:!0}),d().then((function(t){return t&&e()})).finally((function(){return a({submitDisabled:!1})}))}))};function jt(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}var Bt=function(e){var t=e.isInSignPage,n=e.type,r=e.isOversea,a=e.needSMSIdentify,o=e.captchaV2,c=e.registerConfirmSucceeded,i=e.loginConfirmSucceeded,s=e.nextUrl,d=e.captchaNeeded,p=e.loginUnregisteredError,h=e.loginConfirmError,g=e.showSwitchTypeIcon,b=e.isSignPage,m=e.selectClassName,A=e.verification,v=e.containerType,C=Object(w.useDispatch)(),E=Object(l.useReducer)(Ot,e,Et),O=jt(Y.a,E,2),y=O[0],S=O[1],j=y.selectedCountry,B=y.username,I=y.supportedCountriesShown,Q=y.customErrorInputMap,k=y.smsInputInterceptTime,T=y.smsType,N=y.reStartTime,R=y.password,D=y.smsBackUpDisplay,P=y.smsBackUpName,x=y.submitDisabled,z=y.captcha,V=y.fullname,F=y.digits,U=y.lastSubmittedTimestamp,q=Object(l.useRef)(null),J=Object(l.useRef)(null),K=Object(l.useRef)(null),Z=Object(f.l)().trackEvent,W=Object(_.a)((function(){b||Z({block:"".concat(n,"_loginSuccess")})})),H=Object(_.a)((function(e,t){return S({type:Ct,payload:e,callback:t})})),G=ot(e),ee=G.usernameServerError,te=G.digitsServerError,ne=G.passwordServerError,re=G.undefinedLoginError,oe=G.undefinedDigitsError;Object(l.useEffect)((function(){(re||oe)&&C(Object($.g)(re||oe,"red"))}),[C,re,oe]);var ie=at({props:e,state:y,setState:H,rootRef:K}),se=ct({setState:H}),ue=it({state:y}),le=gt({setState:H}),pe=ft({customErrorInputMap:Q,smsType:T,selectedCountry:j,username:B,runBeforeResetValidateResult:le,testPhoneNo:ue,setState:H,captchaNeeded:d,captchaV2Ref:J,continueActionRef:q}),fe=bt({props:e,captchaV2Ref:J}),ge=dt({props:e,selectedCountry:j,captcha:z,setState:H,runBeforeResetValidateResult:le,runBeforeCheckCaptcha:fe,testPhoneNo:ue,continueActionRef:q,customErrorInputMap:Q,username:B,trackLoginSuccess:W});vt({registerConfirmSucceeded:c,loginConfirmSucceeded:i,nextUrl:s,username:B,isInSignPage:t,loginConfirmError:h,setState:H,loginUnregisteredError:p,verification:A});var be=St({props:e,captchaV2Ref:J,continueActionRef:q,setState:H,selectedCountry:j,username:B,fullname:V,digits:F,password:R});if(a)return Object(u.b)(ae,{ref:K,onBack:function(){return C(Object(M.g)())},phoneNo:"".concat(j.code).concat(B)});var me=null;if("qrcode"===n){var Ae=Object(u.b)(f.f,{zaType:"Text",zaText:"二维码登录",extra:{configMap:{containerType:"登录页"}},children:Object(u.b)(L,{ref:K,isInSignPage:t,className:"SignInQrcode",onChangeType:function(){return ie("password")},showSwitchTypeIcon:g,trackLoginSuccess:W})});me=b?Ae:Object(u.b)(f.f,{zaType:"Popup",zaBlock:n,children:Ae},n)}else if(p&&"digits"==n)me=Object(u.b)(ke,{handleRegister:be,setState:H,submitDisabled:x,usernameServerError:ee,passwordServerError:ne});else{var ve=Object(u.c)(X.b,{className:"SignFlow Login-content",onSubmit:ge,children:[Object(u.b)(de,{type:n,showSwitchTypeIcon:g}),Object(u.b)(he,{type:n,isOversea:r,supportedCountriesShown:I,selectedCountry:j,username:B,usernameServerError:ee,customErrorInputMap:Q,targetClassName:"username-input"}),Object(u.b)(Ve,{type:n,smsInputInterceptTime:k,digitsServerError:te,smsType:T,reStartTime:N,passwordServerError:ne,password:R,targetClassName:"username-input"}),Object(u.b)(Fe,{type:n,isOverSea:r,smsBackUpName:P,smsBackUpDisplay:D,smsType:T,containerType:v}),Object(u.b)(tt,{type:n,captchaV2Ref:J,lastSubmittedTimestamp:U}),Object(u.b)(Ue,{submitDisabled:x,type:n,containerType:v})]});me=b?Object(u.b)(f.f,{zaType:"Popup",zaBlock:n,children:ve},n):ve}return Object(u.b)(ce.a,{handleChangeType:ie,setState:H,dispatch:S,selectClassName:m,handleChange:se,testPhoneNo:ue,handleSendDigits:pe,continueActionRef:q,captchaNeeded:d,captchaV2:o,children:me})};Bt.propTypes={validateAndLogin:I.a.func,resetLoginValidateResult:I.a.func,loginConfirmSucceeded:I.a.bool,loginConfirmError:I.a.object,selectClassName:I.a.string,sendDigitsError:I.a.object,captchaNeeded:I.a.bool,selectedCountry:I.a.object,username:I.a.string,password:I.a.string,type:I.a.oneOf(["password","digits","qrcode"]),onChangeType:I.a.func,isInSignPage:I.a.bool,showSwitchTypeIcon:I.a.bool},Bt.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""};var It=Object(w.connect)(oe)(Bt);function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Qt=function(e){Object(c.a)(n,e);var t=wt(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={type:e.props.showQrcodeFirst?"qrcode":"digits",isOversea:!1,passwordType:"email"},e.handleSwitchLoginType=function(t){"email"!==t&&"oversea"!==t?(e.setState({type:t}),C.b.increment("logIn.type.switchTo.".concat(t,".count"),.001)):e.setState({type:"password",isOversea:"oversea"===t,passwordType:t})},e}return Object(o.a)(n,[{key:"renderNotification",value:function(){var e=this.props,t=e.notification,n=e.account,r=n.isAppealed,a=n.spamLevel,o=r||a?G.D:G.C,c=null;return c=6===a?Object.assign(Object.assign({},t),{},{theme:"red"}):t,Object(u.b)(H.a,{notification:c.global,delay:o,className:"AppHeader-notification"})}},{key:"render",value:function(){var e=this.props,t=e.nextUrl,n=e.isInSignPage,r=e.showSwitchTypeIcon,a=e.isSignPage,o=e.selectClassName,c=void 0===o?"Select-popoverTarget":o,i=e.containerType,s=this.state,l=s.type,d=s.isOversea;return Object(u.c)(u.a,{children:[Object(u.b)(It,{containerType:i,type:l,isInSignPage:n,isOversea:d,onChangeType:this.handleSwitchLoginType,nextUrl:t,showSwitchTypeIcon:r,isSignPage:a,selectClassName:c}),this.renderNotification()]})}}]),n}(l.Component);Qt.propTypes={nextUrl:I.a.string,isInSignPage:I.a.bool,showSwitchTypeIcon:I.a.bool,selectClassName:I.a.string};var kt=Object(T.compose)(Q.withRouter,Object(w.connect)((function(e,t){var n=t.showQrcode,r=void 0===n||n,a=t.showQrcodeFirst;return{showQrcodeFirst:r&&a,notification:e.notification,account:e.account,isSignPage:["/signin","/signup"].includes(t.router.location.pathname)}})))(Qt),Tt=n(79),Nt=n(1386),Rt=Object.assign;function Dt(e){return d.a.createElement(E.a,Rt(Rt({width:"24",height:"24",viewBox:"0 0 24 24","data-new-api":"Qq24","data-old-api":"Qq24"},e),{className:"ZDI ZDI--Qq24"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M12.003 2c-2.265 0-6.29 1.364-6.29 7.325v1.195S3.55 14.96 3.55 17.474c0 .665.17 1.025.281 1.025.114 0 .902-.483 1.748-2.072 0 0-.18 2.197 1.904 3.967 0 0-1.77.495-1.77 1.182 0 .686 4.078.43 6.29 0 2.239.425 6.288.687 6.288 0 0-.688-1.77-1.182-1.77-1.182 2.086-1.77 1.906-3.967 1.906-3.967.845 1.588 1.634 2.072 1.746 2.072.111 0 .283-.36.283-1.025 0-2.514-2.165-6.954-2.165-6.954V9.325C18.29 3.364 14.268 2 12.003 2z",fillRule:"evenodd",clipRule:"evenodd"}))}var Pt=n(1405),xt=n(166),Mt=n.n(xt),zt=n(416),Vt=n(1543),Ft={sina:"Weibo",qq:"QQ",wechat:"Wechat"};function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var qt="/oauth/account_callback",Lt={qqconn:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="};function Jt(e){return"sina"!==e||!/WindowsWechat/.test(navigator.userAgent)}var Kt=function(e){Object(c.a)(n,e);var t=Ut(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleCallbackMessage=function(t){var n=t.origin,r=t.data;/(\.)?(zhihu|vzuu)\.(com|dev)/.test(n)&&r&&(e.unsubscribeCallback(),e.accountCallback(r))},e.accountCallback=function(t){var n=e.props.dispatch,r=t.login,a=t.verification,o=t.is_register;if(e.dbg&&alert("收到跨窗口消息:  ".concat(JSON.stringify(t))),void 0!==o){var c=t.code,i=t.msg;return"200"===c?(Object(Vt.b)(),n(Object($.g)("注册成功！")),void setTimeout((function(){return e.reload()}),1e3)):void n(Object($.g)(i||"网络存在异常，请您稍后再试","red"))}null!=a&&a.isZombie&&Object(mt.b)(a),r&&(Object(At.b)(e.clickedServiceName),e.handleLogSocialLoginSuccess(),e.reload())},e.handleBuildSocialAuthLink=function(t){e.clickedServiceName=t,e.handleLogSingleSocialButtonClick(t),C.b.increment("logIn.clickSocial.".concat(t,".count"),.1);var n=Lt[t],r=Object(st.c)(),a=r.utm_source,o=r.utm_medium;Jt(t)?(e.subscribeCallback(),window.open("https://www.zhihu.com".concat(n).concat(qt).concat(a?"&utm_source=".concat(a):"","&ref_source=").concat(o),"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no")):location.href="https://www.zhihu.com".concat(n).concat(qt,"&from=").concat(encodeURIComponent(e.parseNextInfoFromUrl()))},e.handleEntranceButtonClick=function(t){e.props.onEntranceButtonClick&&e.props.onEntranceButtonClick(t),e.handleLogSocialLogin(),e.setState((function(e){return{socialButtonExpanded:!e.socialButtonExpanded}}))},e.parseNextInfoFromUrl=function(){var t=e.props.router.location.query.next,n="/";if(t)try{n=decodeURIComponent(t)}catch(e){n=unescape(t)}return n},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){if(document.referrer.startsWith("https://www.zhihu.com/oauth/callback/sina")){var e=Mt.a.get("atoken"),t=Mt.a.get("accountcallback");if(e&&t){var n=JSON.parse(decodeURIComponent(t));if(!n)return;var r=n.fullname,a=n.type;(0,this.props.onRegister)({fullname:r,socialType:a})}}}},{key:"componentWillUnmount",value:function(){this.unsubscribeCallback()}},{key:"dbg",get:function(){return this.props.office&&"undefined"!=typeof window&&localStorage.getItem("dbg")}},{key:"subscribeCallback",value:function(){window.addEventListener("message",this.handleCallbackMessage,!1),window.NWEB={accountCallback:this.accountCallback},this.domain=document.domain,document.domain="zhihu.com"}},{key:"unsubscribeCallback",value:function(){if(window.removeEventListener("message",this.handleCallbackMessage,!1),window.NWEB&&"www.zhihu.com"===location.host){try{document.domain=this.domain}catch(e){}delete window.NWEB}}},{key:"reload",value:function(){var e=this.parseNextInfoFromUrl();e?location.href=e:location.reload()}},{key:"handleLogSocialLogin",value:function(){A.a.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){var t,n,r,a;t=this,n="SignIn",r={type:Ft[e]},A.a.trackEvent(t,{action:n,element:"Button",element_name:a},{account:r})}},{key:"handleLogSocialLoginSuccess",value:function(){var e,t,n,r,a=this.props,o=a.router,c=a.trackEvent;["/signin","/signup"].includes(o.location.pathname)||c({block:"".concat(this.clickedServiceName,"_loginSuccess")}),e=this,t="SignIn",n=this.clickedServiceName,A.a.trackEvent(e,{id:236,action:"StatusReport",element_name:r},{status:{result:"Success",event:{action:t,element:"Button"}},account:n})}},{key:"render",value:function(){var e=this;return Object(u.b)("div",{className:"Login-socialLogin",children:Object(u.c)("span",{className:"Login-socialButtonGroup",children:[Object(u.b)(f.a,{as:ee.c,zaText:"微信第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://open.weixin.qq.com/connect/qrconnect"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},children:Object(u.b)(Nt.b,{})}),Object(u.b)(f.a,{as:ee.c,zaText:"QQ第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://graph.qq.com/oauth2.0/show"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("qqconn")},children:Object(u.b)(Dt,{fill:"#50C8FD"})}),Object(u.b)(f.a,{as:ee.c,zaText:"微博第三方登录",zaType:"Button",zaAction:"OpenUrl",extra:{link:{url:"https://api.weibo.com/oauth2/authorize"}},className:"Login-socialButton",preset:"plain",onClick:function(){return e.handleBuildSocialAuthLink("sina")},children:Object(u.b)(Pt.b,{})})]})})}}]),n}(l.Component);Kt.propTypes={onRegister:I.a.func.isRequired,onEntranceButtonClick:I.a.func};var Zt=Object(T.compose)(Q.withRouter,P)(Kt);function Wt(e){var t=Object(Tt.b)(),n=Object(w.useDispatch)(),r=Object(zt.a)();return/bux/.test(t.origin)?null:Object(u.b)(Zt,Object.assign(Object.assign({},e),{},{dispatch:n,office:r}))}function Ht(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var Gt={phoneNoError:null,fullnameError:null,passwordError:null,digitsError:null},Yt=function(e){Object(c.a)(n,e);var t=Ht(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",fullname:"",customErrorInputMap:Object.assign({},Gt)},e.handleChange=function(t){return function(n){e.setState(Object(ge.a)({},t,n))}},e.handleSubmit=function(){var t=e.props,n=t.validateAndRegister;(0,t.resetRegisterValidateResult)();var r=e.state;n({source:"com.zhihu.web",registerType:"email",email:r.email,password:r.password,fullname:r.fullname})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.isLogin&&(location.href="https://www.zhihu.com/logout?next=/email-register")}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.registerConfirmSucceeded,n=e.registerConfirmSucceeded;!t&&n&&(location.href="/")}},{key:"render",value:function(){var e=this.props.registerValidateErrors,t=e.email,n=(t=void 0===t?{}:t).message,r=e.fullname,a=(r=void 0===r?{}:r).message,o=e.password,c=(o=void 0===o?{}:o).message;return Object(u.b)(ce.a,{children:Object(u.c)(X.b,{className:"SignContainer-content EmailRegister",onSubmit:this.handleSubmit,children:[Object(u.b)(Ce,{onChange:this.handleChange("fullname"),name:"fullname",placeholder:"用户名",manualValidateError:a}),Object(u.b)(pe.a,{type:"register",placeholder:"输入邮箱",onChange:this.handleChange("email"),manualValidateError:n,supportedCountriesShown:!1}),Object(u.b)(we,{onChange:this.handleChange("password"),manualValidateError:c}),Object(u.b)(ee.c,{className:"EmailRegister-submitButton",preset:"primary",color:"blue",type:"submit",children:"注册"})]})})}}]),n}(l.Component),_t=(Object(T.compose)(W.a,Object(w.connect)((function(e){var t=e.register;return{registerValidateErrors:t.registerValidateErrors,registerConfirmSucceeded:t.registerConfirmSucceeded}}),{validateAndRegister:yt.d,resetRegisterValidateResult:yt.c}))(Yt),Object.assign);function Xt(e){return d.a.createElement(E.a,_t(_t({width:"16",height:"16",viewBox:"0 0 16 16","data-new-api":"ArrowLeft16","data-old-api":"ArrowLeft16"},e),{className:"ZDI ZDI--ArrowLeft16"+(e.className?" ".concat(e.className):"")}),d.a.createElement("path",{d:"M11.46 1.54a.65.65 0 010 .92L5.92 8l5.54 5.54a.65.65 0 11-.92.92L4.73 8.648a.917.917 0 010-1.296l5.81-5.812a.65.65 0 01.92 0z",fillRule:"evenodd",clipRule:"evenodd"}))}var $t=n(941);function en(e){var t=e.captchaNeeded,n=e.sendDigitsError,r=e.registerConfirmError;return function(e){var t=e.captchaNeeded,n=e.sendDigitsError,r=Object(w.useDispatch)(),a=Object($t.a)(n);Object(l.useEffect)((function(){n&&!a&&r(t?Object(Ke.e)():Object(Ke.a)("captcha_sign_in"))}),[r,n,a,t])}({captchaNeeded:t,sendDigitsError:n}),function(e){var t=Object(w.useDispatch)(),n=(e||{}).unknown,r=Object($t.a)(n);Object(l.useEffect)((function(){r!==n&&t(Object($.g)(n,"red"))}),[t,n,r])}(r),null}function tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var nn={phoneNoError:null,fullnameError:null,digitsError:null},rn=function(e){Object(c.a)(n,e);var t=tn(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={fullname:e.props.defaultFullname||"",avatarPath:"",phoneNo:"",digits:"",captcha:"",isRegister:null,smsBackUpDisplay:!0,smsType:"text",selectedCountry:{name:"中国",code:"+86"},smsInputInterceptTime:-1,reStartTime:-1,customErrorInputMap:Object.assign({},nn),validationResult:{}},e.captchaV2Ref=Object(l.createRef)(),e.getSocialInfo=function(t){var n=t||e.props,r=n.getSocialInfo,a=n.socialType;a&&r(a).then((function(t){var n=t.payload,r=n.name,a=n.profileImageUrl;e.setState({avatarPath:a.split("/").reverse()[0],fullname:r})}))},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,r=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(r)},e.handleChange=function(t){return function(n){e.setState(Object(ge.a)({},t,n))}},e.handleBackUpDigits=function(){e.setState({smsType:"text"===e.state.smsType?"voice":"text",reStartTime:Date.now()})},e.handleCountDownEndEvent=function(){e.setState({smsBackUpDisplay:!0})},e.parseServerError=function(t){var n=t||e.props,r=n.registerValidateErrors,a=n.loginConfirmError,o=n.registerConfirmError,c=n.sendDigitsError,i=a||{},s=i.username,u=i.password,l=i.digits,d=i.captcha,p=o||{},f=p.username,h=p.password,g=p.digits,b=c||{},m=b.username,A=b.captcha,v=(r||{}).fullname;return{usernameServerError:s||m,passwordServerError:u||h,digitsServerError:l||g,captchaServerError:d||A,fullnameServerError:(v=void 0===v?{}:v).message||f}},e.runBeforeCheckCaptcha=function(t){var n=e.props,r=n.captchaNeeded,a=n.captchaValidated,o=e.state.phoneNo;if(o&&e.testPhoneNo())return r&&!a?(e.showCaptcha(),void pt(e.captchaV2Ref)):void t();e.setState({customErrorInputMap:Object.assign(Object.assign({},e.state.customErrorInputMap),{},{phoneNoError:o?"请输入正确的手机号":"请输入手机号"}),smsInputInterceptTime:Date.now()})},e.runBeforeResetValidateResult=function(t){e.setState({customErrorInputMap:Object.assign({},nn)},(function(){t()}))},e.handleSendDigits=function(t,n){return e.countDownStart=n,e.runBeforeCheckCaptcha(e.sendDigits),!1},e.sendDigits=function(){var t,n,r=e.state,a=r.selectedCountry,o=r.phoneNo,c=r.smsType,i=e.props.sendLoginDigits;null===(t=(n=e).countDownStart)||void 0===t||t.call(n),e.props.validateRegisterForm({phoneNo:"".concat(a.code).concat(o)}).then((function(t){var n=t.payload;e.setState({smsBackUpDisplay:!1,isRegister:!(n.phoneNo&&n.phoneNo.code===G.o)}),i("".concat(a.code).concat(o),c)}))},e.handleSubmit=function(){e.runBeforeCheckCaptcha((function(){e.runBeforeResetValidateResult((function(){var t=e.state,n=t.selectedCountry,r=t.phoneNo,a=t.digits,o=t.isRegister,c=t.fullname,i=t.avatarPath,s=e.props,u=s.validateAndLogin,l=s.validateAndRegister,d=s.nextUrl,p=s.socialType,f=Object(st.c)(d),h=f.utm_source,g=f.utm_medium;o?l(Object.assign(Object.assign({source:"com.zhihu.web",registerType:"phone_digits",phoneNo:"".concat(n.code).concat(r),fullname:c,digits:a,refSource:g,utmSource:h},i&&{avatarPath:i}),p&&{socialRegisterType:p})):u(Object(ut.a)("digits",{username:"".concat(n.code).concat(r),digits:a,refSource:g,utmSource:h}))}))}))},e.onVerify=function(t){"success"===t.result&&e.sendDigits()},e.showCaptcha=function(){var t;null===(t=e.captchaV2Ref.current)||void 0===t||t.show(),e.props.showNotification(e.state.validationResult.message,"red")},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){if(Mt.a.get("atoken")){this.getSocialInfo();var e=Mt.a.get("accountcallback");if(!this.state.fullname&&e){var t=JSON.parse(decodeURIComponent(e));this.setState({fullname:t.fullname})}}else this.props.onResetRegister()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props,n=t.nextUrl,r=t.socialType,a=t.defaultFullname,o=t.sendDigitsError,c=t.loginConfirmError,i=t.loginConfirmSucceeded,s=t.registerConfirmSucceeded,u=e.socialType,l=e.defaultFullname,d=e.sendDigitsError,p=e.loginConfirmError,f=e.loginConfirmSucceeded,h=e.registerConfirmSucceeded;if(!r&&u&&this.getSocialInfo(e),a!==l&&this.setState({fullname:l}),!i&&f||!s&&h)n?location.href=n:location.reload();else if(!c&&p&&p.validateDigitsError&&this.setState({customErrorInputMap:Object.assign(Object.assign({},this.state.customErrorInputMap),{},{digitsError:p.validateDigitsError}),smsInputInterceptTime:Date.now()}),!o&&d){var g=this.parseServerError(e).captchaServerError;this.setState({validationResult:{message:g},smsInputInterceptTime:Date.now()})}}},{key:"render",value:function(){var e=this.state,t=e.smsInputInterceptTime,n=e.customErrorInputMap,r=e.smsBackUpDisplay,a=e.reStartTime,o=e.isRegister,c=e.smsType,i=e.fullname,s=this.props,l=s.onResetRegister,d=s.captchaNeeded,p=s.sendDigitsError,f=s.registerConfirmError,h=n.phoneNoError,b=n.digitsError,m=this.parseServerError(),A=m.usernameServerError,v=m.fullnameServerError,C=m.digitsServerError,E=Object(u.c)(X.b,{className:"Register-content",onSubmit:this.handleSubmit,children:[Object(u.b)(en,{captchaNeeded:d,sendDigitsError:p,registerConfirmError:f}),Object(u.b)("div",{className:"Register-socialHeader",children:Object(u.c)("div",{className:"Register-socialTitle",children:[Object(u.b)(ee.c,{onClick:l,children:Object(u.b)(Xt,{})}),"绑定手机"]})},"header"),Object(u.b)(Ce,{className:g()("Register-socialName",{"Register-hiddenSocialName":!o}),name:"fullname",placeholder:"用户名",value:i,onChange:this.handleChange("fullname"),manualValidateError:v,validations:[],targetClassName:"username-input"},"fullname"),Object(u.b)(pe.a,{type:"register",onChange:this.handleChange("phoneNo"),onSelect:this.handleChange("selectedCountry"),manualValidateError:h||A,targetClassName:"username-input"}),Object(u.b)(tt,{captchaV2Ref:this.captchaV2Ref,onVerify:this.onVerify}),Object(u.b)(Me,{smsType:c,reStartTime:a,onChange:this.handleChange("digits"),countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,interceptTime:t,manualValidateError:b||C,targetClassName:"username-input"}),Object(u.b)("div",{className:g()("Register-smsBackUp",{"Register-hiddenSmsBackUp":!r}),children:Object(u.c)("span",{role:"button",tabIndex:0,onClick:this.handleBackUpDigits,children:["获取","text"===c?"语音":"短信","验证码"]})}),Object(u.b)(ee.c,{className:"Register-submitButton",type:"submit",preset:"primary",color:"blue",children:"进入知乎"})]});return Object(u.b)(ce.a,{children:E})}}]),n}(l.Component),an=Object(w.connect)((function(e){var t=e.captcha,n=t.captchaNeeded,r=t.captchaValidated,a=e.register,o=a.registerConfirmError,c=a.registerValidateErrors,i=a.registerConfirmSucceeded,s=e.login,u=s.loginConfirmSucceeded,l=s.validateDigitsError,d=s.loginConfirmError;return{captchaNeeded:n,captchaValidated:r,sendDigitsError:s.sendDigitsError,registerConfirmError:o,registerValidateErrors:c,registerConfirmSucceeded:i,loginConfirmSucceeded:u,validateDigitsError:l,loginConfirmError:d}}),{showNotification:$.g,sendLoginDigits:M.h,validateAndLogin:M.i,validateAndRegister:yt.d,getSocialInfo:yt.b,validateRegisterForm:yt.e})(rn);function on(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var cn=function(e){Object(c.a)(n,e);var t=on(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={showHeader:!0,fullname:"",socialType:""},e.changeSignType=function(t){e.props.onChangeSignType(t),e.handleSetShowHeader(!0)},e.handleSetShowHeader=function(t){e.setState({showHeader:t})},e.handleSocialRegister=function(t){var n=t.fullname,r=t.socialType;e.props.onChangeSignType("register"),e.setState({fullname:n,socialType:r,showHeader:!1})},e.handleResetRegister=function(){e.props.onChangeSignType("login"),e.setState({fullname:"",socialType:"",showHeader:!0})},e.renderLine=function(){return Object(u.c)(k.Flex,{css:{margin:"0 24px 12px",alignItems:"center"},children:[Object(u.b)(k.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A",width:"124px"}}),Object(u.b)(k.Text,{color:"GBK06A",fontSize:12,mx:16,width:72,overflow:"hidden",lineHeight:"17px",css:{whiteSpace:"nowrap"},children:"其他方式登录"}),Object(u.b)(k.Box,{sx:{borderTop:"1px solid",borderColor:"GBK09A",width:"124px"}})]})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.nextUrl;e.isLogin&&(location.href=t||"/")}},{key:"render",value:function(){var e=this.state,t=e.fullname,n=e.socialType,r=this.props,a=r.nextUrl,o=r.isInSignPage,c=r.signType,i=r.showQrcodeFirst,s=r.showSwitchTypeIcon,l=r.containerType,d=o?k.Card:k.Box;return Object(u.c)(d,{bg:"background",width:400,css:{overflow:"hidden",boxShadow:"none"},children:["login"===c?Object(u.b)("div",{className:"SignContainer-content",children:Object(u.b)("div",{className:"SignContainer-inner",children:Object(u.b)(kt,{containerType:l,showQrcodeFirst:i,nextUrl:a,isInSignPage:o,showSwitchTypeIcon:s})})}):Object(u.b)(an,{socialType:n,nextUrl:a,defaultFullname:t,onResetRegister:this.handleResetRegister}),"login"===c&&Object(u.c)(u.a,{children:[this.renderLine(),Object(u.b)(Wt,{onRegister:this.handleSocialRegister}),Object(u.c)("div",{className:"SignContainer-tip",children:[N.a.allowSignUp?"未注册手机验证后自动登录，注册即代表同意":"手机验证后自动登录，登录即代表同意",Object(u.b)("a",{href:"https://www.zhihu.com/term/zhihu-terms",children:"《知乎协议》"}),Object(u.b)("a",{href:"https://www.zhihu.com/term/privacy",children:"《隐私保护指引》"})]})]})]})}}]),n}(l.Component),sn=Object(W.a)(cn),un=["signType","handleQRCodeLinkClick","isInSignPage","showQrcode"];function ln(e){var t=e.signType,n=e.handleQRCodeLinkClick,a=e.isInSignPage,o=e.showQrcode,c=Object(r.default)(e,un);return Object(u.c)("div",{className:"signQr-container",children:[Object(u.c)("div",{className:"signQr-leftContainer",children:[Object(u.b)(L,{className:"smallVersion",showSwitchTypeIcon:!1}),Object(u.b)(Z,{zaClickId:a?4943:8270,isQRCodeShown:o,onQRCodeLinkClick:function(e){n(!o),a?o&&A.a.trackEvent(e.currentTarget,{id:4945}):A.a.trackEvent(e.currentTarget,{id:o?8272:8271})}})]}),Object(u.b)("div",{className:"signQr-rightContainer",children:Object(u.b)(sn,Object.assign({signType:t,showSwitchTypeIcon:!1,isInSignPage:a},c))})]})}var dn=["onClose","showQrcodeFirst","titlePart"];function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var fn=function(e){Object(c.a)(n,e);var t=pn(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={signType:e.props.signType||"login",showQrcode:!1},e.handleChangeSignType=function(t){e.setState({signType:t})},e.handleToggleQrcode=function(t){e.setState({showQrcode:t})},e.handleCloseQrcode=function(){e.setState({showQrcode:!1})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.showQrcodeFirst,a=e.titlePart,o=Object(r.default)(e,dn),c=this.state,i=c.signType,s=c.showQrcode;return Object(u.b)(f.b,{block:"signModal",children:Object(u.b)(f.f,{zaType:"Popup",zaBlock:i,children:Object(u.b)(p.b,Object.assign(Object.assign({className:"signFlowModal",onClose:t},o),{},{children:Object(u.c)(f.f,{zaType:"Popup",zaText:"登录框曝光",children:[a,Object(u.c)("div",{className:"signFlowModal-container",children:[Object(u.b)(ln,{containerType:"SignContainerModal",showQrcodeFirst:n,signType:i,onChangeSignType:this.handleChangeSignType,showQrcode:s,handleQRCodeLinkClick:this.handleToggleQrcode}),Object(u.c)("div",{className:g()("SignFlowQRImage noArrow",{"SignFlowQRImage--isHidden":!s}),children:[Object(u.b)("p",{className:"SignFlowQRImage-title",children:"扫码下载知乎 App"}),Object(u.b)("div",{className:"smallSize"}),Object(u.c)("button",{className:"SignFlowQRImage-closeButton",onClick:this.handleCloseQrcode,children:[Object(u.b)(b.a,{}),"关闭二维码"]})]})]})]})}))})})}}]),n}(l.Component)},1902:function(e,t,n){"use strict";n.r(t),n.d(t,"CONFIRM_BIND_PHONE",(function(){return $})),n.d(t,"BIND_PHONE",(function(){return ee})),n.d(t,"LOGIN_WITH_PHONE",(function(){return te})),n.d(t,"NEED_UNBIND",(function(){return ne})),n.d(t,"CONFIRM_UNBIND",(function(){return re})),n.d(t,"SAFETY_VERIFICATION",(function(){return ae}));var r,a=n(12),o=n(13),c=n(15),i=n(16),s=n(7),u=n(0),l=n(2),d=n.n(l),p=n(1),f=n(11),h=n(24),g=n(517),b=n(132),m=n(306),A=n(45),v=n(29),C=n(38),E=n(4),O=n(19),y=n(9),S=n(71),j=n(20),B=n(1543),I=n(1453),w=n(1472),Q=n(1508),k=n(106),T=n(14),N=n(25),R=n(1607),D=n(1542),P=n(1482),x=["countDownEvent","startAtOnce","interceptTime","resetText","manualValidateError","onChange","validations","countDownEndEvent","reStartTime","isIOS"];function M(e,t,n){if(t&&!Array.isArray(t)&&"number"==typeof t.length){var r=t.length;return function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}(t,void 0!==n&&n<r?n:r)}return e(t,n)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var V=function(e){Object(c.a)(n,e);var t=z(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.startAtOnce,a=e.interceptTime,o=e.resetText,c=e.manualValidateError,i=e.onChange,s=e.validations,l=e.countDownEndEvent,d=e.reStartTime,p=e.isIOS,f=Object(N.default)(e,x);return Object(u.c)("div",{className:"SignFlow SignFlow-smsBindPhoneInputContainer",children:[Object(u.b)(P.a,Object.assign({name:"digits",className:"SignFlow-smsBindPhoneInput",type:p?"tel":"number",errorMessageClassName:"SignFlow-smsBindPhoneInputErrorMask",placeholder:"输入 6 位验证码",manualValidateError:c,onChange:i,validations:[{type:"required",message:"请填写验证码",className:"SignFlow-smsInputBindPhoneRequiredErrorMask"}].concat(M(T.a,s||[]))},f)),Object(u.b)(R.a,{className:"SignFlow-smsBindPhoneInputButton",preset:"plain",initialText:"发送验证码",resetText:o,countingText:Object(D.a)(r||(r=Object(k.a)(["","s 后可重发"])),"count"),startAtOnce:n,event:t,countDownEndEvent:l,interceptTime:a,reStartTime:d})]})}}]),n}(p.Component);V.propTypes={countDownEvent:d.a.func.isRequired,startAtOnce:d.a.bool,interceptTime:d.a.number,resetText:d.a.string,manualValidateError:d.a.string},V.defaultProps={startAtOnce:!1,resetText:"重发验证码"};var F=Object(f.connect)((function(e){return{isIOS:e.env.userAgent.iOS}}))(V);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var q=function(e){Object(c.a)(n,e);var t=U(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).zaRef=Object(p.createRef)(),e.state={selectedCountry:{code:"+86",name:"中国"},phoneNo:null,smsInputInterceptTime:-1,manualError:null,showFooter:!1,sendValidationCodeButtonText:"发送验证码",identifyingCodeError:null},e.testPhoneNo=function(){var t=e.state,n=t.selectedCountry.code,r=t.phoneNo;return"+86"!==n||/^\d{11}$/.test(r)},e.handleChange=function(t){return function(n){e.setState(Object(E.a)({},t,n))}},e.handleSendDigits=function(t){e.zaRef.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",moduleId:e.isSocialRegister?"reg_mobile_verification_code_button":""}});var n=e.props.requestPhoneVerificationCode,r=e.state,a=r.selectedCountry.code,o=r.phoneNo,c=r.manualError;if(O.a.trackEvent(t.target,{action:"GetCaptcha"}),e.testPhoneNo())return n("".concat(a).concat(o)).then((function(){e.setState({manualError:null})})).catch((function(t){var n=t.payload,r=(n=void 0===n?{}:n).message;return e.setState({manualError:r,smsInputInterceptTime:Date.now()})}));return e.setState({manualError:"请输入正确的手机号"===c?" ".concat("请输入正确的手机号"):"请输入正确的手机号",smsInputInterceptTime:Date.now()})},e.trackSubmitResult=function(t){e.zaRef.current.trackEvent({eventType:"Click",elementLocation:{type:"Button",moduleId:e.isSocialRegister?"reg_mobile_setting_confirm_button":""}},{configMap:{bindResult:t?"1":"0"}})},e.handleSubmit=function(t){var n=t.phoneNo,r=t.digits,a=e.props,o=a.updatePhoneNumber,c=a.onSuccess,i=a.onNeedUnbind,s=e.state,u=s.selectedCountry.code,l=s.identifyingCodeError;o("".concat(u).concat(n),r).then((function(t){var r=t.payload,a=r.data,o=r.success;if(e.trackSubmitResult(o),o)return c();var s=a.bindedAccountFullname,u=a.requestAccountFullname;return i({phoneNumber:n,bindName:s,requiredName:u})})).catch((function(t){e.trackSubmitResult(!1);var n=t.payload,r=(n=void 0===n?{}:n).code,a=n.message;r===v.t&&e.setState({identifyingCodeError:l===a?" ".concat(a):a})}))},e.handleZaOK=function(e){O.a.trackEvent(e.target,{action:"Ok"})},e.renderContent=function(){var t=e.state,n=t.smsInputInterceptTime,r=t.manualError,a=t.sendValidationCodeButtonText,o=t.identifyingCodeError;return Object(u.c)(y.f,{zaType:"Popup",zaModuleId:e.isSocialRegister?"reg_mobile_setting_popup":"",ref:function(t){e.container=t},children:[Object(u.b)(y.e,{ref:e.zaRef}),Object(u.c)(w.b,{className:"SignFlow BindPhoneForm",onSubmit:e.handleSubmit,children:[void 0,Object(u.b)(I.a,{selectClassName:"BindPhone-select",children:Object(u.b)(Q.a,{type:"register",supportedCountriesShown:!0,manualValidateError:r,onSelect:e.handleChange("selectedCountry"),onChange:e.handleChange("phoneNo")})}),Object(u.b)(F,{resetText:a,interceptTime:n,countDownEvent:e.handleSendDigits,manualValidateError:o},"sms-input"),Object(u.b)("div",{className:"BindPhone-helpWrapper",children:Object(u.b)(j.c,{className:"BindPhone-helpText",preset:"link",onClick:function(){e.setState({showFooter:!0})},children:"需要帮助？"})}),Object(u.b)(j.c,{css:{display:"block",width:"220px",margin:"55px auto 0"},preset:"primary",color:"blue",type:"submit",onClick:e.handleZaOK,children:"确认"})]})]})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){O.a.setModule(this.container,{module:"BindPhoneForm"}),O.a.trackCardShow(this.container)}},{key:"isSocialRegister",get:function(){return Object(B.a)()}},{key:"render",value:function(){var e=this.props.onClose,t=this.state.showFooter;return Object(u.b)(S.b,{title:"设置手机号",subtitle:"绑定手机号后，您可以解锁知乎的提问、回答、评论等更多功能。",footer:t?"如需要帮助，请联系 i@zhihu.com，我们会尽快帮你解决":null,onClose:e,size:"default",children:this.renderContent()})}}]),n}(p.Component);q.propTypes={requestPhoneVerificationCode:d.a.func.isRequired,updatePhoneNumber:d.a.func.isRequired,onClose:d.a.func.isRequired,onSuccess:d.a.func.isRequired,onNeedUnbind:d.a.func.isRequired};var L=n(109);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}var K=function(e){Object(c.a)(n,e);var t=J(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).zaKnowMore=function(e){O.a.trackEvent(e.target,{action:"OpenUrl",name:"了解更多"})},e.toBindPhone=function(t){var n=e.props.onBindPhone;O.a.trackEvent(t.target,{action:"OpenUrl",name:"去绑定手机"}),n()},e.handleClose=function(t){var n=e.props,r=n.onClose,a=n.config.canWrite;O.a.trackEvent(t.target,{action:"Cancel",name:a?"暂不绑定":"取消"}),r()},e.renderContent=function(){var t=e.props.config,n=t.tip,r=t.canWrite;return Object(u.c)("div",{ref:function(t){e.container=t},children:[Object(u.c)("p",{children:[n,Object(u.b)(L.a,{preset:"link",target:"_blank",href:"https://zhuanlan.zhihu.com/p/27257715",onClick:e.zaKnowMore,children:"了解更多"})]}),Object(u.c)("div",{className:"BindPhone-buttonSection",children:[Object(u.b)(L.a,{className:"BindPhone-button",onClick:e.handleClose,children:r?"暂不绑定":"取消"}),Object(u.b)(j.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:e.toBindPhone,children:"去绑定手机"})]})]})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){O.a.setModule(this.container,{module:"BindPhoneForm"}),O.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose;return Object(u.b)(S.b,{className:void 0,title:"绑定手机",onClose:e,size:"default",children:this.renderContent()})}}]),n}(p.Component);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}K.propTypes={config:d.a.object,onClose:d.a.func,onBindPhone:d.a.func};var W=function(e){Object(c.a)(n,e);var t=Z(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleUnbind=function(t){var n=e.props,r=n.onSuccess,a=n.monopolizePhoneNumber,o=n.showNotification;O.a.trackEvent(t.target,{action:"Click",name:"确认解绑"}),a().then((function(){return o("绑定成功！","white"),r()}))},e.handleCancel=function(t){var n=e.props.onCancel;O.a.trackEvent(t.target,{action:"Click",name:"暂不绑定"}),n()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){O.a.setModule(this.container,{module:"BindPhoneVerifyForm"}),O.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.bindName;return Object(u.b)(S.b,{className:void 0,title:"解绑手机",onClose:n,size:"default",children:Object(u.c)("div",{ref:function(t){e.container=t},children:[Object(u.b)("p",{children:Object(u.b)("b",{children:"解绑操作无法撤销。"})}),void 0,Object(u.c)("p",{children:["如果你没有其他登录方式，你将无法再使用帐号「",r,"」。"]}),Object(u.c)("div",{className:"BindPhone-buttonSection",children:[Object(u.b)(j.c,{className:"BindPhone-button",onClick:this.handleUnbind,children:"确认解绑"}),Object(u.b)(j.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"暂不绑定"})]})]})})}}]),n}(p.Component);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}W.propTypes={onClose:d.a.func.isRequired,onSuccess:d.a.func.isRequired,onCancel:d.a.func.isRequired,bindName:d.a.string.isRequired,showNotification:d.a.func.isRequired,monopolizePhoneNumber:d.a.string.isRequired};var G=function(e){Object(c.a)(n,e);var t=H(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleCancel=function(t){var n=e.props.onClose;O.a.trackEvent(t.target,{action:"Cancel",name:"不绑定"}),n()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){O.a.setModule(this.container,{module:"BindMailForm"}),O.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props.onClose;return Object(u.b)(S.b,{className:void 0,title:"手机号绑定成功",onClose:t,size:"default",children:Object(u.c)("div",{ref:function(t){e.container=t},children:[Object(u.b)("p",{children:"由于你此前绑定的邮箱未经验证，未来请使用手机号登录知乎。"}),Object(u.b)(j.c,{className:"BindPhone-remindLoginWithPhoneButton",onClick:this.handleCancel,preset:"primary",color:"blue",children:"知道了"})]})})}}]),n}(p.Component);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}G.propTypes={onClose:d.a.func};var _=function(e){Object(c.a)(n,e);var t=Y(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).handleCancel=function(t){var n=e.props.onCancel;O.a.trackEvent(t.target,{action:"Click",name:"暂不绑定"}),n()},e.handleConfirm=function(t){var n=e.props.onConfirm;O.a.trackEvent(t.target,{action:"Click",name:"确认解绑"}),n()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){O.a.setModule(this.container,{module:"BindPhoneFailForm"}),O.a.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.phoneNumber,a=t.bindName,o=t.requiredName;return Object(u.b)(S.b,{className:void 0,title:"绑定失败",onClose:n,size:"default",children:Object(u.c)("div",{ref:function(t){e.container=t},children:[Object(u.c)("p",{children:["你所输入的手机号 ",r," 已经被绑定到帐号「",a,"」。"]}),void 0,Object(u.c)("p",{children:["你可以选择将该手机号从该帐号中解绑，并绑定至当前帐号「",o,"」。"]}),void 0,Object(u.b)("p",{children:Object(u.c)("b",{children:["解绑后，你将无法再通过手机号登录原帐号「",a,"」。"]})}),Object(u.c)("div",{className:"BindPhone-buttonSection",children:[Object(u.b)(j.c,{className:"BindPhone-button",onClick:this.handleConfirm,children:"确认解绑"}),Object(u.b)(j.c,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel,children:"暂不绑定"})]})]})})}}]),n}(p.Component);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var a=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.a)(this,n)}}_.propTypes={onClose:d.a.func.isRequired,onCancel:d.a.func.isRequired,onConfirm:d.a.func.isRequired,phoneNumber:d.a.string.isRequired,bindName:d.a.string.isRequired,requiredName:d.a.string.isRequired};var $="CONFIRM_BIND_PHONE",ee="BIND_PHONE",te="LOGIN_WITH_PHONE",ne="NEED_UNBIND",re="CONFIRM_UNBIND",ae="SAFETY_VERIFICATION",oe=function(e){Object(c.a)(n,e);var t=X(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={},e.handleBindPhoneSuccess=function(){var t=e.props,n=t.needShowLoginWithPhoneNumber,r=t.showNotification,a=t.onToggle,o=t.onSuccess;return null==o||o(),n?e.goToStep(te)():(r("绑定成功！","white"),setTimeout((function(){return location.reload()}),2e3),a())},e.handleNeedUnbind=function(t){var n=t.bindName,r=t.phoneNumber,a=t.requiredName;return e.setState({bindName:n,phoneNumber:r,requiredName:a,step:ne})},e.goToStep=function(t){return function(){return e.setState({step:t})}},e.handleCloseWithReload=function(){return location.reload()},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fillCurrentUserIfNeeded)(["email","isActive","isBindPhone"])}},{key:"componentDidUpdate",value:function(e){e.currentStep!==this.props.currentStep&&this.goToStep(this.props.currentStep)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.shown,r=t.requestPhoneVerificationCode,a=t.updatePhoneNumber,o=t.monopolizePhoneNumber,c=t.showNotification,i=t.config,s=t.account,l=t.unlockTicketByDigits,d=t.requestUnlockTicket,p=t.unlockTicketByPassword,f=t.onToggle,h=t.isBindPhone,b=t.isZombie,m=t.onSuccess,A=this.state,v=A.step,C=A.bindName,E=A.phoneNumber,O=A.requiredName;return n?v===$?Object(u.b)(K,{onBindPhone:this.goToStep(ae),onClose:f,config:i}):v===ee?Object(u.b)(q,{onClose:f,onSuccess:this.handleBindPhoneSuccess,onNeedUnbind:this.handleNeedUnbind,requestPhoneVerificationCode:r,updatePhoneNumber:a}):v===te?Object(u.b)(G,{onClose:this.handleCloseWithReload}):v===ne?Object(u.b)(_,{onClose:f,onCancel:this.goToStep(ee),onConfirm:this.goToStep(re),bindName:C,phoneNumber:E,requiredName:O}):v===re?Object(u.b)(W,{onClose:f,onSuccess:this.handleBindPhoneSuccess,onCancel:this.goToStep(ee),bindName:C,monopolizePhoneNumber:o,showNotification:c}):v===ae?Object(u.b)(g.a,{isShown:!0,account:s,unlockTicketByDigits:l,requestUnlockTicket:d,unlockTicketByPassword:p,onClose:f,onSuccess:function(){b&&h||e.goToStep(ee)(),null==m||m()},zaModuleName:"BindMailForm"}):null:null}}]),n}(p.Component);oe.propTypes={shown:d.a.bool.isRequired,onToggle:d.a.func.isRequired,needShowLoginWithPhoneNumber:d.a.bool.isRequired,config:d.a.object.isRequired,requestPhoneVerificationCode:d.a.func.isRequired,updatePhoneNumber:d.a.func.isRequired,monopolizePhoneNumber:d.a.func.isRequired,onSuccess:d.a.func};t.default=Object(h.compose)(b.a,Object(f.connect)((function(e,t){var n=e.account,r=t.currentUser,a=r.isActive,o=r.email,c=r.isZombie,i=r.isBindPhone;return{account:n,hasActiveEmail:a&&o,needShowLoginWithPhoneNumber:!a&&!!o,config:v.H,isZombie:c,isBindPhone:i}}),{requestPhoneVerificationCode:m.g,updatePhoneNumber:m.k,monopolizePhoneNumber:m.e,showNotification:C.g,getUnlockRequest:m.d,unlockTicketByDigits:m.i,requestUnlockTicket:m.h,unlockTicketByPassword:m.j,fillCurrentUserIfNeeded:A.e}))(oe)}}]);
//# sourceMappingURL=column.signflow.531757a16e7f251ec627.js.map