<!DOCTYPE html>
<!-- saved from url=(0055)http://c.biancheng.net/spring_boot/external-config.html -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="renderer" content="webkit">
<meta name="force-rendering" content="webkit">
<meta name="applicable-device" content="pc,mobile">
<meta name="MobileOptimized" content="width">
<meta name="HandheldFriendly" content="true">
<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="format-detection" content="telephone=no">
<link rel="shortcut icon" href="http://c.biancheng.net/favicon.ico?v=1.6.82">
<link href="./Spring Boot外部配置文件_files/common.css" rel="stylesheet">
<title>Spring Boot外部配置文件</title>
<meta name="description" content="除了默认配置文件，Spring Boot 还可以加载一些位于项目外部的配置文件。我们可以通过如下 2 个参数，指定外部配置文件的路径： spring.config.location spring.config.additional-location spring.conf">
</head>
<body>
<div id="topbar" class="clearfix">
<ul id="product-type" class="left">
<li>
<a href="http://c.biancheng.net/"><span class="iconfont iconfont-home"></span>首页</a>
</li>
<li class="active">
<a href="http://c.biancheng.net/sitemap/" rel="nofollow"><span class="iconfont iconfont-book"></span>教程</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/vip/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-vip"></span>VIP会员</a>
</li>
<li>
<a href="http://vip.biancheng.net/p/q2a/show.php" rel="nofollow" target="_blank"><span class="iconfont iconfont-q2a"></span>一对一答疑</a>
</li>
<li>
<a href="http://fudao.biancheng.net/" rel="nofollow" target="_blank"><span class="iconfont iconfont-fudao"></span>辅导班</a>
</li>
<li>
<a href="http://c.biancheng.net/view/9648.html" rel="nofollow" target="_blank"><span class="iconfont iconfont-weixin"></span>公众号</a>
</li>
</ul>
</div>
<div id="header" class="clearfix">
<a id="logo" class="left" href="http://c.biancheng.net/">
<img height="26" src="./Spring Boot外部配置文件_files/logo.png" alt="C语言中文网">
</a>
<ul id="nav-main" class="hover-none left clearfix">
<li class="wap-yes"><a href="http://c.biancheng.net/">首页</a></li>
<li><a href="http://c.biancheng.net/c/">C语言教程</a></li>
<li><a href="http://c.biancheng.net/cplus/">C++教程</a></li>
<li><a href="http://c.biancheng.net/python/">Python教程</a></li>
<li><a href="http://c.biancheng.net/java/">Java教程</a></li>
<li><a href="http://c.biancheng.net/linux_tutorial/">Linux入门</a></li>
<li><a href="http://c.biancheng.net/sitemap/" title="网站地图">更多&gt;&gt;</a></li>
</ul>
<span id="sidebar-toggle" class="toggle-btn" toggle-target="#sidebar">目录 <span class="iconfont"></span></span>
<a href="http://vip.biancheng.net/?from=topbar" class="user-info iconfont iconfont-user hover-none" target="_blank" rel="nofollow" title="用户中心"></a>
</div>
<div id="main" class="clearfix">
<div id="sidebar" class="toggle-target">
<div id="contents">
<dt><span class="iconfont iconfont-list-vertical" aria-hidden="true"></span><a href="http://c.biancheng.net/spring_boot/">Spring Boot</a></dt>
<dd>
<span class="channel-num">1</span>
<a href="http://c.biancheng.net/spring_boot/overview.html">Spring Boot是什么</a>
</dd>
<dd>
<span class="channel-num">2</span>
<a href="http://c.biancheng.net/spring_boot/example.html">创建Spring Boot项目</a>
</dd>
<dd>
<span class="channel-num">3</span>
<a href="http://c.biancheng.net/spring_boot/starter.html">Spring Boot starter</a>
</dd>
<dd>
<span class="channel-num">4</span>
<a href="http://c.biancheng.net/spring_boot/yaml.html">YAML</a>
</dd>
<dd>
<span class="channel-num">5</span>
<a href="http://c.biancheng.net/spring_boot/config-bind.html">Spring Boot配置绑定</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">6</span>
<a href="http://c.biancheng.net/spring_boot/import-spring-config.html">Spring Boot导入Spring配置</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">7</span>
<a href="http://c.biancheng.net/spring_boot/profile.html">Spring Boot Profile</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">8</span>
<a href="http://c.biancheng.net/spring_boot/default-config.html">Spring Boot默认配置文件</a>
</dd>
<dd class="active">
<span class="channel-num">9</span>
<a href="http://c.biancheng.net/spring_boot/external-config.html">Spring Boot外部配置文件</a>
</dd>
<dd>
<span class="channel-num">10</span>
<a href="http://c.biancheng.net/spring_boot/config-order.html">Spring Boot配置加载顺序</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">11</span>
<a href="http://c.biancheng.net/spring_boot/auto-config.html">Spring Boot自动配置原理</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">12</span>
<a href="http://c.biancheng.net/spring_boot/slf4j-logback.html">Spring Boot统一日志框架</a>
</dd>
<dd>
<span class="channel-num">13</span>
<a href="http://c.biancheng.net/spring_boot/log-config.html">Spring Boot日志配置及输出</a>
</dd>
<dd>
<span class="channel-num">14</span>
<a href="http://c.biancheng.net/spring_boot/starter-web.html">spring-boot-starter-web</a>
</dd>
<dd>
<span class="channel-num">15</span>
<a href="http://c.biancheng.net/spring_boot/static-mapping.html">Spring Boot静态资源映射</a>
</dd>
<dd>
<span class="channel-num">16</span>
<a href="http://c.biancheng.net/spring_boot/thymeleaf.html">Thymeleaf</a>
</dd>
<dd>
<span class="channel-num">17</span>
<a href="http://c.biancheng.net/spring_boot/thymeleaf-import.html">Spring Boot整合Thymeleaf</a>
</dd>
<dd>
<span class="channel-num">18</span>
<a href="http://c.biancheng.net/spring_boot/spring-mvc.html">Spring Boot定制Spring MVC</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">19</span>
<a href="http://c.biancheng.net/spring_boot/global.html">Spring Boot国际化</a>
</dd>
<dd>
<span class="channel-num">20</span>
<a href="http://c.biancheng.net/spring_boot/interceptor.html">Spring Boot拦截器</a>
</dd>
<dd>
<span class="channel-num">21</span>
<a href="http://c.biancheng.net/spring_boot/default-exception.html">Spring Boot默认异常处理</a>
</dd>
<dd>
<span class="channel-num">22</span>
<a href="http://c.biancheng.net/spring_boot/global-exception.html">Spring Boot全局异常处理</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">23</span>
<a href="http://c.biancheng.net/spring_boot/servlet-filter-listener.html">Spring Boot注册Web原生组件</a>
</dd>
<dd>
<span class="channel-num">24</span>
<a href="http://c.biancheng.net/spring_boot/jdbc.html">Spring Boot JDBC访问数据库</a>
</dd>
<dd>
<span class="channel-num">25</span>
<a href="http://c.biancheng.net/spring_boot/datasource-cofig.html">Spring Boot数据源配置原理</a><span class="iconfont iconfont-vip2"></span>
</dd>
<dd>
<span class="channel-num">26</span>
<a href="http://c.biancheng.net/spring_boot/druid.html">Spring Boot整合Druid数据源</a>
</dd>
<dd>
<span class="channel-num">27</span>
<a href="http://c.biancheng.net/spring_boot/mybatis.html">Spring Boot整合MyBatis</a>
</dd>
<dd>
<span class="channel-num">28</span>
<a href="http://c.biancheng.net/spring_boot/custom-starter.html">Spring Boot自定义starter</a><span class="iconfont iconfont-vip2"></span>
</dd>
</div>
</div>
<div id="article-wrap">
<div id="article">
<div class="arc-info">
<span class="position"><span class="iconfont iconfont-home2"></span> <a href="http://c.biancheng.net/">首页</a> &gt; <a href="http://c.biancheng.net/spring_boot/">Spring Boot</a></span>
</div>
<div id="ggxc-position-bottom" class="ggxc-box"><a href="http://fudao.biancheng.net/?source=positionbottom" target="_blank"><img width="100%" src="./Spring Boot外部配置文件_files/fudaoban_wap.png"></a></div>
<h1>Spring Boot外部配置文件</h1>
<div class="pre-next-page clearfix"><span class="pre left"><a href="http://c.biancheng.net/spring_boot/default-config.html"><span class="icon">&lt;</span> 上一节</a></span><span class="next right"><a href="http://c.biancheng.net/spring_boot/config-order.html">下一节 <span class="icon">&gt;</span></a></span></div>
<div id="ggxc-arctop-pc-1" class="ggxc-box"><a href="http://fudao.biancheng.net/?source=arctop" target="_blank"><img width="100%" src="./Spring Boot外部配置文件_files/fudaoban_pc.png"></a></div>
<div id="arc-body"><p>
<span style="font-size: 14px; font-weight: normal;">除了默认配置文件，Spring Boot 还可以加载一些位于项目外部的配置文件。我们可以通过如下 2 个参数，指定外部配置文件的路径：</span></p>
<ul>
<li>
spring.config.location&nbsp;</li>
<li>
spring.config.additional-location&nbsp;</li>
</ul>
<h2>
spring.config.location</h2>
我们可以先将 Spring Boot 项目打包成 JAR 文件，然后在命令行启动命令中，使用命令行参数 --spring.config.location，指定外部配置文件的路径。<br>
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display: none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="infobox sh_infobox snippet-formatted" showmenu="false" shownum="false"><ul class="snippet-no-num"><li>java -jar {JAR}  --spring.config.location={外部配置文件全路径}</li></ul></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">java -jar {JAR}  --spring.config.location={外部配置文件全路径}</pre></div></div>
<br>
需要注意的是，使用该参数指定配置文件后，会使项目默认配置文件（application.properties 或 application.yml ）失效，Spring Boot 将只加载指定的外部配置文件。
<h2>
示例 1</h2>
1. 在本地目录 D:\myConfig 下，创建一个配置文件 my-application.yml，配置如下。
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="xml sh_xml snippet-formatted sh_sourceCode"><ol class="snippet-num"><li>#指定配置文件</li><li>server:</li><li>  port: 8088</li></ol></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">#指定配置文件
server:
  port: 8088</pre></div></div>
&nbsp;<br>
2. 执行以下 mvn 命令，将&nbsp;springbootdemo 项目打包成 JAR。
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="infobox sh_infobox snippet-formatted" showmenu="false" shownum="false"><ul class="snippet-no-num"><li>mvn clean package</li></ul></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">mvn clean package
</pre></div></div>
<br>
命令执行结果如下图。<br>
<br>
<div style="text-align: center;">
<img alt="Spring Boot  打包结果" src="./Spring Boot外部配置文件_files/1543504106-0.png"><br>
图1：打包结果</div>
<br>
3. 打开命令行窗口，跳转到 JAR 文件所在目录，执行以下命令，其中 --spring.config.location 用于指定配置文件的新位置。<br>
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="infobox sh_infobox snippet-formatted" showmenu="false" shownum="false"><ul class="snippet-no-num"><li>java -jar springbootdemo-0.0.1-SNAPSHOT.jar  --spring.config.location=D:\myConfig\my-application.yml</li></ul></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">java -jar springbootdemo-0.0.1-SNAPSHOT.jar  --spring.config.location=D:\myConfig\my-application.yml

</pre></div></div>
项目运行结果如下图。<br>
<br>
<div style="text-align: center;">
<a href="./Spring Boot外部配置文件_files/154350F35-1.png" target="_blank"><img alt="Spring Boot --spring.config.location 指定外部配置文件" src="./Spring Boot外部配置文件_files/154350F35-1.png"></a><br>
图2：使用外部配置运行项目控制台输出</div>
<br>
从控制台输出可以看出：
<ul>
<li>
服务器端口号从“8084”被修改为“8088”，表示外部配置文件已生效；</li>
<li>
上下文路径则从“/abc”被修改为默认值（‘ ’），表示项目内部的默认配置文件已失效。</li>
</ul>
<br>
4. 使用浏览器访问&nbsp;“http://localhost:8088/test”,结果如下图。<br>
<br>
<div style="text-align: center;">
<img alt="Spring Boot 指定外部配置文件访问结果" src="./Spring Boot外部配置文件_files/1543502930-2.png"><br>
图3：spring.config.location 指定外部配置文件访问结果</div>
<h2>
spring.config.additional-location</h2>
我们还可以在 Spring Boot 启动时，使用命令行参数 --spring.config.additional-location 来加载外部配置文件。
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="infobox sh_infobox snippet-formatted" showmenu="false" shownum="false"><ul class="snippet-no-num"><li>java -jar {JAR}  --spring.config.additional-location={外部配置文件全路径}</li></ul></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">java -jar {JAR}  --spring.config.additional-location={外部配置文件全路径}</pre></div></div>
<br>
但与&nbsp;--spring.config.location 不同，--spring.config.additional-location 不会使项目默认的配置文件失效，使用该命令行参数添加的外部配置文件会与项目默认的配置文件共同生效，形成互补配置，且其优先级是最高的，比所有默认配置文件的优先级都高。
<h2>
示例 2</h2>
1. 将&nbsp;springbootdemo 打包为 JAR 文件，打开命令行窗口，跳转到该项目 JAR 所在目录下，执行以下命令启动该项目。
<div class="snippet-container" style="undefined;"><div class="sh_bright snippet-wrap"><div class="snippet-menu sh_sourceCode" style="display:none;"><pre style="display: none;"><a class="snippet-copy sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#" style="display: none;">复制</a><a class="snippet-text sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">纯文本</a><a class="snippet-window sh_url" href="http://c.biancheng.net/spring_boot/external-config.html#">复制</a></pre></div><pre class="infobox sh_infobox snippet-formatted" showmenu="false" shownum="false"><ul class="snippet-no-num"><li>java -jar springbootdemo-0.0.1-SNAPSHOT.jar  --spring.config.additional-location=D:\myConfig\my-application.yml</li></ul></pre><pre class="snippet-textonly sh_sourceCode" style="display:none;">java -jar springbootdemo-0.0.1-SNAPSHOT.jar  --spring.config.additional-location=D:\myConfig\my-application.yml</pre></div></div>
<br>
结果如下图。<br>
<br>
<div style="text-align: center;">
<a href="./Spring Boot外部配置文件_files/1543503K3-3.png" target="_blank"><img alt="" src="./Spring Boot外部配置文件_files/1543503K3-3.png"></a></div>
<div style="text-align: center;">
图4：Spring Boot&nbsp; spring.config.additional-location 指定外部配置文件项目启动结果</div>
<br>
注意：Maven 对项目进行打包时，位于项目根目录下的配置文件是无法被打包进项目的 JAR 包的，因此位于根目录下的默认配置文件无法在 JAR 中生效，即该项目将只加载指定的外部配置文件和项目类路径（classpath）下的默认配置文件，它们的加载优先级顺序为：<br>
<ol>
<li>
spring.config.additional-location 指定的外部配置文件 my-application.yml</li>
<li>
classpath:/config/application.yml</li>
<li>
classpath:/application.yml</li>
</ol>
<br>
根据配置文件优先级分析可知：
<ul>
<li>
以上三个配置文件中 my-application.yml 的优先级最高，因此该项目的服务器端口号为 “8088”；</li>
<li>
只有&nbsp;classpath:/config/application.yml 中配置了上下文路径（context-path），因此该项目的上下文路径为 “/helloworld”；</li>
<li>
基于以上配置分析，得出该项目访问路径为“http://localhost:8088/helloWorld”。</li>
</ul>
<br>
2. 使用浏览器访问 “http://localhost:8088/helloworld/test”，结果如下图。<br>
<br>
<div style="text-align: center;">
<img alt="Spring Boot 外配文件访问" src="./Spring Boot外部配置文件_files/15435063T-4.png"><br>
图5：使用&nbsp;spring.config.additional-location 指定的外部配置文件访问结果</div>
<blockquote>
<p>
通过上面的示例，我们看到将 Spring Boot 项目打包后，然后在命令行启动命令中添加 spring.config.additional-location 参数指定外部配置文件，会导致项目根目录下的配置文件无法被加载，我们可以通过以下 3 种方式解决这个问题。</p>
<ul>
<li>
在 IDEA 的运行配置（Run/Debug Configuration）中，添加虚拟机参数 -Dspring.config.additional-location=D:\myConfig\my-application.yml，指定外部配置文件；</li>
</ul>
<ul>
<li>
在 IDEA 的运行配置（Run/Debug Configuration）中，添加程序运行参数 --spring.config.additional-location=D:\myConfig\my-application.yml，指定外部配置文件；</li>
<li>
在主启动类中调用&nbsp;System.setProperty（）方法添加系统属性 spring.config.additional-location，指定外部配置文件。</li>
</ul>
</blockquote>
</div>
<div id="ggxc-weixin-arcbottom">
<p>关注公众号「<span class="col-green">站长严长生</span>」，在手机上阅读所有教程，随时随地都能学习。本公众号由<a class="col-link" href="http://c.biancheng.net/view/8092.html" target="_blank" rel="nofollow">站长</a>亲自运营，长期更新，坚持原创，专注于分享创业故事+学习历程+工作记录+生活日常+编程资料。</p>
<p style="margin-top:12px; text-align:center;">
<img src="./Spring Boot外部配置文件_files/qrcode_original.png" alt="公众号二维码" width="180"><br>
<span class="col-green">微信扫码关注公众号</span>
</p>
</div>
<div class="pre-next-page clearfix"><span class="pre left"><a href="http://c.biancheng.net/spring_boot/default-config.html"><span class="icon">&lt;</span> 上一节</a></span><span class="next right"><a href="http://c.biancheng.net/spring_boot/config-order.html">下一节 <span class="icon">&gt;</span></a></span></div>
</div>
</div>
</div>
<script type="text/javascript">
// 当前文章ID
window.arcIdRaw = 'a_' + 8953;
window.arcId = "9b94oN0L2UdhCWOWOisgOzDDtbkfeHpOGFBVp8y8oPOsyJ5KpnzhRLSOvVg";
window.typeidChain = "302";
</script>
<div id="footer" class="clearfix">
<div class="info left">
<p>精美而实用的网站，分享优质编程教程，帮助有志青年。千锤百炼，只为大作；精益求精，处处斟酌；这种教程，看一眼就倾心。</p>
<p>
<a href="http://c.biancheng.net/view/8066.html" target="_blank" rel="nofollow">关于网站</a> <span>|</span>
<a href="http://c.biancheng.net/view/8092.html" target="_blank" rel="nofollow">关于站长</a> <span>|</span>
<a href="http://c.biancheng.net/view/8097.html" target="_blank" rel="nofollow">如何完成一部教程</a> <span>|</span>
<a href="http://c.biancheng.net/view/9648.html" target="_blank" rel="nofollow">公众号</a> <span>|</span>
<a href="http://c.biancheng.net/view/8093.html" target="_blank" rel="nofollow">联系我们</a> <span>|</span>
<a href="http://c.biancheng.net/sitemap/" target="_blank" rel="nofollow">网站地图</a>
</p>
<p>Copyright ©2012-2022 biancheng.net, <a href="https://beian.miit.gov.cn/" target="_blank" rel="nofollow" style="color:#666;">冀ICP备2022013920号</a>, <img height="13" src="./Spring Boot外部配置文件_files/gongan.png" alt="公安备案图标"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13110202001352" target="_blank" rel="nofollow" style="color:#666;">冀公网安备13110202001352号</a>
</p>
</div>
<img id="logo_bottom" class="right" src="./Spring Boot外部配置文件_files/logo_bottom.gif" alt="底部Logo">
<span id="return-top"><b>↑</b></span>
</div>
<script type="text/javascript">
window.siteId = 4;
window.cmsTemplets = "/templets/new";
window.cmsTempletsVer = "1.6.82";
window.prePageURL = "/spring_boot/default-config.html";
window.nextPageURL = "/spring_boot/config-order.html";
</script>
<script src="./Spring Boot外部配置文件_files/jquery1.12.4.min.js.下載"></script>
<script src="./Spring Boot外部配置文件_files/common.js.下載"></script>
<span style="display: none;"><script type="text/javascript" src="./Spring Boot外部配置文件_files/21368967.js.下載"></script></span>

</body></html>